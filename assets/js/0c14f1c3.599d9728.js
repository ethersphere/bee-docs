"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[9566],{6358:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"develop/host-your-website","title":"Host a Webpage","description":"There are two primary methods most developers should use for uploading a website to Swarm - swarm-cli and bee-js. Depending on the specific use case, it may make more sense to pick one or the other.","source":"@site/docs/develop/host-your-website.md","sourceDirName":"develop","slug":"/develop/host-your-website","permalink":"/docs/develop/host-your-website","draft":false,"unlisted":false,"editUrl":"https://github.com/ethersphere/docs.github.io/blob/master/docs/develop/host-your-website.md","tags":[],"version":"current","frontMatter":{"title":"Host a Webpage","id":"host-your-website"},"sidebar":"develop","previous":{"title":"Upload & Download","permalink":"/docs/develop/upload-and-download"},"next":{"title":"Add Access Control","permalink":"/docs/develop/act"}}');var a=n(74848),i=n(28453),r=n(65537),o=n(79329);const l={title:"Host a Webpage",id:"host-your-website"},d=void 0,c={},h=[{value:"Host a Site With <strong>swarm-cli</strong>",id:"host-a-site-with-swarm-cli",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Upload &amp; Access by Hash",id:"upload--access-by-hash",level:3},{value:"Uploading the Website",id:"uploading-the-website",level:4},{value:"Accessing the Website",id:"accessing-the-website",level:4},{value:"(Recommended) Use Feeds for Seamless Updates - swarm-cli",id:"recommended-use-feeds-for-seamless-updates---swarm-cli",level:3},{value:"Step 1: Create a dedicated publisher identity",id:"step-1-create-a-dedicated-publisher-identity",level:4},{value:"Step 2: Upload your website to a feed (creates the manifest automatically)",id:"step-2-upload-your-website-to-a-feed-creates-the-manifest-automatically",level:4},{value:"Step 3: Use the feed reference as the ENS contenthash",id:"step-3-use-the-feed-reference-as-the-ens-contenthash",level:4},{value:"Updating your site in the future",id:"updating-your-site-in-the-future",level:4},{value:"Host a Website with <strong>bee-js</strong>",id:"host-a-website-with-bee-js",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Upload and Access by Hash",id:"upload-and-access-by-hash",level:3},{value:"(Recommended) Use Feeds for Seamless Updates - bee-js",id:"recommended-use-feeds-for-seamless-updates---bee-js",level:3},{value:"Example Script",id:"example-script",level:4},{value:"Connect Site to ENS Domain",id:"connect-site-to-ens-domain",level:2},{value:"Using the Official ENS Guide",id:"using-the-official-ens-guide",level:4},{value:"Swarm-Specific Step",id:"swarm-specific-step",level:4}];function u(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.p,{children:["There are two primary methods most developers should use for uploading a website to Swarm - ",(0,a.jsx)(s.code,{children:"swarm-cli"})," and ",(0,a.jsx)(s.code,{children:"bee-js"}),". Depending on the specific use case, it may make more sense to pick one or the other."]}),"\n",(0,a.jsxs)(s.p,{children:["For a simple website such as a personal blog or company page, using ",(0,a.jsx)(s.code,{children:"swarm-cli"})," is simplest and fastest way to get your site uploaded and accessible on Swarm."]}),"\n",(0,a.jsxs)(s.p,{children:["However for developers who need finer grained control over the process or who wish to build a more complex application which require programmatically spinning up new pages, ",(0,a.jsx)(s.code,{children:"bee-js"})," is required."]}),"\n",(0,a.jsx)(s.admonition,{type:"tip",children:(0,a.jsxs)(s.p,{children:["The guides below assume you already have a registered ENS domain name. By using an ENS domain name, you can make your Swarm hosted website accessible through an easy to remember human-readable name rather than a Swarm hash. If you don't have an ENS domain name registered, you can get one using the official ENS application at ",(0,a.jsx)(s.a,{href:"https://app.ens.domains/",children:"app.ens.domains"}),". Refer to their support section for a step-by-step guide to ",(0,a.jsx)(s.a,{href:"https://support.ens.domains/en/articles/7882582-how-to-register-a-eth-name",children:"register an ENS domain"}),"."]})}),"\n",(0,a.jsxs)(s.admonition,{title:"FIX FOR ENS NOT WORKING ON LOCALHOST",type:"tip",children:[(0,a.jsx)(s.p,{children:"If the site doesn\u2019t load from localhost, it\u2019s probably an with the resolver RPC (the RPC endpoint for the Ethereum node used to resolve your ENS domain name)."}),(0,a.jsx)(s.p,{children:"Some endpoints, such as:"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"https://cloudflare-eth.com\n"})}),(0,a.jsx)(s.p,{children:"may not resolve properly on localhost."}),(0,a.jsx)(s.p,{children:"As of the writing of this guide, both of these free and public endpoints work reliably for localhost resolution:"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"https://mainnet.infura.io/v3/<infura-api-key>\nhttps://eth-mainnet.public.blastapi.io\n"})}),(0,a.jsx)(s.p,{children:"Alternatively, you can run your own Ethereum node and use that as the RPC."})]}),"\n",(0,a.jsxs)(s.h2,{id:"host-a-site-with-swarm-cli",children:["Host a Site With ",(0,a.jsx)(s.strong,{children:"swarm-cli"})]}),"\n",(0,a.jsxs)(s.p,{children:["This guide shows you how to get your website hosted on Swarm with just a few simple commands by using ",(0,a.jsx)(s.code,{children:"swarm-cli"})," from your terminal."]}),"\n",(0,a.jsx)(s.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["A running Bee node (either a ",(0,a.jsx)(s.a,{href:"/docs/bee/installation/quick-start",children:"standard installation"})," or ",(0,a.jsx)(s.a,{href:"/docs/desktop/install",children:"Swarm Desktop"}),")"]}),"\n",(0,a.jsx)(s.li,{children:"A valid postage batch"}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsxs)(s.a,{href:"https://docs.ethswarm.org/docs/bee/working-with-bee/swarm-cli",children:[(0,a.jsx)(s.code,{children:"swarm-cli"})," installed"]})}),"\n",(0,a.jsx)(s.li,{children:"A valid postage stamp batch"}),"\n",(0,a.jsx)(s.li,{children:"Your static website files (you can also use the example website files provided below)"}),"\n",(0,a.jsxs)(s.li,{children:['(Optional for part one - "Upload & Access by Hash") An ENS domain which you ',(0,a.jsx)(s.a,{href:"https://support.ens.domains/en/articles/7882582-how-to-register-a-eth-name",children:"previously registered"})]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"upload--access-by-hash",children:"Upload & Access by Hash"}),"\n",(0,a.jsxs)(s.p,{children:["You can download the example website files from the ",(0,a.jsx)(s.a,{href:"https://github.com/ethersphere/examples/tree/main/basic-static-website",children:"ethersphere/examples"})," repository."]}),"\n",(0,a.jsx)(s.h4,{id:"uploading-the-website",children:"Uploading the Website"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Go to the folder containing your website files."}),"\n"]}),"\n",(0,a.jsx)(s.p,{children:"The example website files look like this:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"my-website/\n\u251c\u2500\u2500 index.html       # main landing page\n\u251c\u2500\u2500 404.html         # custom error page\n\u251c\u2500\u2500 styles.css       # basic styling\n\u251c\u2500\u2500 script.js        # optional script\n\u251c\u2500\u2500 favicon.svg      # site icon\n\u2514\u2500\u2500 robots.txt       # default robots config\n"})}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"index.html"})," will be served by default when users visit the root URL."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"404.html"})," will be served for non-existent paths."]}),"\n",(0,a.jsx)(s.li,{children:"The other files are optional and can be customized."}),"\n"]}),"\n",(0,a.jsxs)(s.ol,{start:"2",children:["\n",(0,a.jsx)(s.li,{children:"Run:"}),"\n"]}),"\n",(0,a.jsxs)(r.A,{defaultValue:"powershell",values:[{label:"PowerShell",value:"powershell"},{label:"Linux / macOS",value:"bash"}],children:[(0,a.jsx)(o.A,{value:"powershell",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-powershell",children:"swarm-cli upload . `\n  --stamp <BATCH_ID> `\n  --index-document index.html `\n  --error-document 404.html\n"})})}),(0,a.jsx)(o.A,{value:"bash",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"swarm-cli upload . \\\n  --stamp <BATCH_ID> \\\n  --index-document index.html \\\n  --error-document 404.html\n"})})})]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["Replace ",(0,a.jsx)(s.code,{children:"<BATCH_ID>"})," with your postage batch ID."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"--index-document"})," tells Bee which file to serve at the root."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"--error-document"})," defines the fallback file for missing paths."]}),"\n"]}),"\n",(0,a.jsxs)(s.ol,{start:"3",children:["\n",(0,a.jsx)(s.li,{children:"The upload will return a Swarm reference hash, for example:"}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"cf50756e6115445fd283691673fa4ad2204849558a6f3b3f4e632440f1c3ab7c\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Copy this and save it. You\u2019ll need it for both direct access and ",(0,a.jsx)(s.a,{href:"#connect-site-to-ens-domain",children:"ENS integration"}),"."]}),"\n",(0,a.jsx)(s.h4,{id:"accessing-the-website",children:"Accessing the Website"}),"\n",(0,a.jsx)(s.p,{children:"Anyone with a Bee node can now access the site using the Swarm hash you just saved:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"http://localhost:1633/bzz/<SWARM_HASH>/\n"})}),"\n",(0,a.jsx)(s.h3,{id:"recommended-use-feeds-for-seamless-updates---swarm-cli",children:"(Recommended) Use Feeds for Seamless Updates - swarm-cli"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsxs)(s.em,{children:["If you have not already connected your site to your ENS domain, ",(0,a.jsx)(s.a,{href:"#connect-site-to-ens-domain",children:"do that now"})," before returning here."]})}),"\n",(0,a.jsxs)(s.p,{children:["If you have an ENS domain and Swarm hosted website, you can make the site available through the domain by registering website's Swarm hash as a content hash through the ",(0,a.jsx)(s.a,{href:"https://app.ens.domains/",children:"ENS domain management app"}),". However, if you ever edit and reupload your site to Swarm, you will need to re-register your new website hash to make it available at your ENS domain."]}),"\n",(0,a.jsx)(s.p,{children:"Therefore, instead of directly using your website hash as the content hash for your ENS domain, upload your site as a feed update and use the feed manifest hash as the content hash. Then every time you update your site as a new feed update, the ENS domain will always resolve to the newest version of your site without the need to register a new hash each time."}),"\n",(0,a.jsx)(s.admonition,{type:"tip",children:(0,a.jsxs)(s.p,{children:['The examples below refer to core feed concepts such as "publisher identity", and "topic". To learn more about these concepts refer to the ',(0,a.jsx)(s.a,{href:"https://bee-js.ethswarm.org/docs/soc-and-feeds/#feeds",children:"bee-js documentation"}),"."]})}),"\n",(0,a.jsx)(s.p,{children:"In this section, you will:"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Create a publisher identity"}),"\n",(0,a.jsx)(s.li,{children:"Upload your site to a feed (this automatically creates the feed manifest)"}),"\n",(0,a.jsx)(s.li,{children:"Copy the feed manifest reference"}),"\n",(0,a.jsx)(s.li,{children:"Use that manifest reference as your ENS contenthash"}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"step-1-create-a-dedicated-publisher-identity",children:"Step 1: Create a dedicated publisher identity"}),"\n",(0,a.jsx)(s.p,{children:"This key will sign feed updates."}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"swarm-cli identity create website-publisher\n"})}),"\n",(0,a.jsx)(s.p,{children:"Terminal output:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"Name: website-publisher\nType: V3 Wallet\nPrivate key: 0x22e918ef68c9bc975112ceaaee0ee0f147baa79da257873659bddbfd84a646fe\nPublic key: 0x218c79f8dfb26d077b6379eb56aa9c6e71edf74dde8ecd27dac5016528aea80ee121b9e5050adf3948c8b0d8cffda763d7fb1f5608250b5009c5d50e158ab4a5\nAddress: 0x2fb11d37a9913bd3258b9918c399f35fd842a232\n"})}),"\n",(0,a.jsx)(s.p,{children:"Record the output in a secure location as a backup \u2014 you will need this identity for future updates."}),"\n",(0,a.jsx)(s.p,{children:"If you need to view/export it later:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"swarm-cli identity export website-publisher\n"})}),"\n",(0,a.jsx)(s.h4,{id:"step-2-upload-your-website-to-a-feed-creates-the-manifest-automatically",children:"Step 2: Upload your website to a feed (creates the manifest automatically)"}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsx)(o.A,{value:"linux",label:"Linux / macOS",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"swarm-cli feed upload ./website \\\n  --identity website-publisher \\\n  --topic-string website \\\n  --stamp <BATCH_ID> \\\n  --index-document index.html \\\n  --error-document 404.html\n"})})}),(0,a.jsx)(o.A,{value:"powershell",label:"Windows PowerShell",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-powershell",children:"swarm-cli feed upload .\\website `\n  --identity website-publisher `\n  --topic-string website `\n  --stamp <BATCH_ID> `\n  --index-document index.html `\n  --error-document 404.html\n"})})})]}),"\n",(0,a.jsxs)(s.p,{children:["You will see output that includes your ",(0,a.jsx)(s.strong,{children:"feed manifest reference"}),", for example:"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"Swarm hash: 387dc3cf98419dcb20c68b284373bf7d9e8dcb27daadb67e1e6b6e0f17017f1f\nURL: http://localhost:1633/bzz/387dc3cf98419dcb20c68b284373bf7d9e8dcb27daadb67e1e6b6e0f17017f1f/\nFeed Manifest URL: http://localhost:1633/bzz/6c30ef2254ac15658959cb18dd123bcce7c16d06fa7d0d4550a1ee87b0a846a2/\nStamp ID: 3d98a22f\nUsage: 50%\nCapacity (mutable): 20.445 KB remaining out of 40.890 KB\n"})}),"\n",(0,a.jsxs)(s.p,{children:["You can find the manifest hash at ",(0,a.jsx)(s.code,{children:"Feed Manifest URL"})," in the URL right after ",(0,a.jsx)(s.code,{children:"/bzz/"}),": ",(0,a.jsx)(s.code,{children:"6c30ef2254ac15658959cb18dd123bcce7c16d06fa7d0d4550a1ee87b0a846a2"})]}),"\n",(0,a.jsx)(s.p,{children:"Save this hash, you will use it for the next step."}),"\n",(0,a.jsxs)(s.p,{children:["This is your ",(0,a.jsx)(s.strong,{children:"permanent website reference"}),". It is a reference to a feed manifest which points to the latest feed entry so that you can use it as a static, unchanging reference for your website even as you make multiple updates to the site. Every time you update the website through the feed, this manifest will point to the hash for the newest version of the website."]}),"\n",(0,a.jsx)(s.h4,{id:"step-3-use-the-feed-reference-as-the-ens-contenthash",children:"Step 3: Use the feed reference as the ENS contenthash"}),"\n",(0,a.jsxs)(s.p,{children:["Follow the ",(0,a.jsx)(s.a,{href:"https://support.ens.domains/en/articles/12275979-how-to-add-a-decentralized-website-to-an-ens-name",children:"official ENS guide"})," for registering a content hash adding your content hash in the ENS UI (see ",(0,a.jsx)(s.a,{href:"#connect-site-to-ens-domain",children:"guide"}),"). However, rather than registering your website's hash directly, register the feed manifest hash we saved from the previous step from our example above."]}),"\n",(0,a.jsx)(s.p,{children:"Example:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"bzz://6c30ef2254ac15658959cb18dd123bcce7c16d06fa7d0d4550a1ee87b0a846a2\n"})}),"\n",(0,a.jsx)(s.p,{children:"Now your ENS name will always point to a static reference which will always resolve to the latest version of your website."}),"\n",(0,a.jsx)(s.h4,{id:"updating-your-site-in-the-future",children:"Updating your site in the future"}),"\n",(0,a.jsxs)(s.p,{children:["When you have a new version of your site, just run ",(0,a.jsx)(s.code,{children:"feed upload"})," again using the same topic and identity:"]}),"\n",(0,a.jsxs)(r.A,{children:[(0,a.jsx)(o.A,{value:"linux",label:"Linux / macOS",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"swarm-cli feed upload ./website \\\n  --identity website-publisher \\\n  --topic-string website \\\n  --stamp <BATCH_ID> \\\n  --index-document index.html \\\n  --error-document 404.html\n"})})}),(0,a.jsx)(o.A,{value:"powershell",label:"Windows PowerShell",children:(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-powershell",children:"swarm-cli feed upload .\\website `\n  --identity website-publisher `\n  --topic-string website `\n  --stamp <BATCH_ID> `\n  --index-document index.html `\n  --error-document 404.html\n"})})})]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["The ",(0,a.jsx)(s.strong,{children:"feed manifest reference stays the same"}),"."]}),"\n",(0,a.jsx)(s.li,{children:"The feed now points to the newly uploaded site version."}),"\n",(0,a.jsx)(s.li,{children:"No ENS changes needed."}),"\n"]}),"\n",(0,a.jsxs)(s.h2,{id:"host-a-website-with-bee-js",children:["Host a Website with ",(0,a.jsx)(s.strong,{children:"bee-js"})]}),"\n",(0,a.jsxs)(s.p,{children:["This guide explains how to host a website on Swarm using the ",(0,a.jsx)(s.code,{children:"bee-js"})," JavaScript SDK instead of the CLI."]}),"\n",(0,a.jsxs)(s.p,{children:["For developers building apps, tools, or automated deployments, ",(0,a.jsx)(s.code,{children:"bee-js"})," offers programmatic control over uploading and updating content on Swarm."]}),"\n",(0,a.jsx)(s.h3,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["A running Bee node (either a ",(0,a.jsx)(s.a,{href:"/docs/bee/installation/quick-start",children:"standard installation"})," or ",(0,a.jsx)(s.a,{href:"/docs/desktop/install",children:"Swarm Desktop"}),")"]}),"\n",(0,a.jsx)(s.li,{children:"A valid postage stamp batch"}),"\n",(0,a.jsxs)(s.li,{children:["Node.js (18+) and ",(0,a.jsx)(s.code,{children:"@ethersphere/bee-js"})," installed in your project"]}),"\n",(0,a.jsxs)(s.li,{children:["Static website files (HTML, CSS, etc.) - feel free to use the ",(0,a.jsx)(s.a,{href:"https://github.com/ethersphere/examples/tree/main/basic-static-website",children:"provided example site"})]}),"\n",(0,a.jsxs)(s.li,{children:['(Optional for part one - "Upload & Access by Hash") An ENS domain which you ',(0,a.jsx)(s.a,{href:"https://support.ens.domains/en/articles/7882582-how-to-register-a-eth-name",children:"previously registered"})]}),"\n"]}),"\n",(0,a.jsx)(s.h3,{id:"upload-and-access-by-hash",children:"Upload and Access by Hash"}),"\n",(0,a.jsx)(s.p,{children:"Install bee-js:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"npm install @ethersphere/bee-js\n"})}),"\n",(0,a.jsx)(s.p,{children:"Website upload script:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-js",children:'import { Bee } from "@ethersphere/bee-js";\n\nconst bee = new Bee("http://localhost:1633");\n\nconst batchId = "<BATCH_ID>"; // Replace with your actual postage batch ID\n\nconst result = await bee.uploadFilesFromDirectory(batchId, "./website", {\n  indexDocument: "index.html",\n  errorDocument: "404.html"\n});\n\nconsole.log("Swarm hash:", result.reference.toHex());\n'})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"Swarm hash: 6c45eae389b3bffce21443316d0bd47c4101545092b7c72c313a33ee7d003475\n"})}),"\n",(0,a.jsx)(s.p,{children:"After running the script, copy the Swarm hash output to the console and then use it to open your Swarm hosted website in the browser:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"http://localhost:1633/bzz/<SWARM_HASH>/\n"})}),"\n",(0,a.jsx)(s.h3,{id:"recommended-use-feeds-for-seamless-updates---bee-js",children:"(Recommended) Use Feeds for Seamless Updates - bee-js"}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsxs)(s.em,{children:["If you have not already connected your site to your ENS domain, ",(0,a.jsx)(s.a,{href:"#connect-site-to-ens-domain",children:"do that now"})," before returning here."]})}),"\n",(0,a.jsxs)(s.p,{children:["If you have an ENS domain and Swarm hosted website, you can make the site available through the domain by registering website's Swarm hash as a content hash through the ",(0,a.jsx)(s.a,{href:"https://app.ens.domains/",children:"ENS domain management app"}),". However, if you ever edit and reupload your site to Swarm, you will need to re-register your new website hash to make it available at your ENS domain."]}),"\n",(0,a.jsx)(s.p,{children:"Therefore, instead of directly using your website hash as the content hash for your ENS domain, upload your site as a feed update and use the feed manifest hash as the content hash. Then every time you update your site as a new feed update, the ENS domain will always resolve to the newest version of your site without the need to register a new hash each time."}),"\n",(0,a.jsxs)(s.admonition,{type:"tip",children:[(0,a.jsx)(s.p,{children:"You will need a publisher key to use for setting up your website feed."}),(0,a.jsxs)(s.p,{children:["You can use the ",(0,a.jsx)(s.code,{children:"PrivateKey"})," class to generate a dedicated publisher key:"]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-js",children:"const crypto = require('crypto');\nconst { PrivateKey } = require('@ethersphere/bee-js');\n\n// Generate 32 random bytes and construct a private key\nconst hexKey = '0x' + crypto.randomBytes(32).toString('hex');\nconst privateKey = new PrivateKey(hexKey);\n\nconsole.log('Private key:', privateKey.toHex());\nconsole.log('Public address:', privateKey.publicKey().address().toHex());\n"})}),(0,a.jsx)(s.p,{children:"Example output:"}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"Private key: 634fb5a872396d9693e5c9f9d7233cfa93f395c093371017ff44aa9ae6564cdd\nPublic address: 8d3766440f0d7b949a5e32995d09619a7f86e632\n"})}),(0,a.jsx)(s.p,{children:"Store this key securely."}),(0,a.jsx)(s.p,{children:"Anyone with access to it can publish to your feed."}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"It is recommended to use a separate publishing key for each feed."})})]}),"\n",(0,a.jsx)(s.h4,{id:"example-script",children:"Example Script"}),"\n",(0,a.jsx)(s.admonition,{type:"tip",children:(0,a.jsxs)(s.p,{children:['The script below refers to some core feed concepts such as the feed "topic" and "writer". To learn more about these concepts and feeds in general, refer to the ',(0,a.jsx)(s.a,{href:"https://bee-js.ethswarm.org/docs/soc-and-feeds/#feeds",children:"bee-js documentation"}),"."]})}),"\n",(0,a.jsx)(s.p,{children:"The script performs these steps:"}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Connects to your Bee node"})," and loads your postage batch + publisher private key."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Creates a feed topic and writer"})," for publishing website updates."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsxs)(s.strong,{children:["Uploads the ",(0,a.jsx)(s.code,{children:"./website"})," directory"]})," to Swarm and logs the resulting content hash."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Publishes that hash to the feed"})," so it becomes the latest feed entry."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Creates a feed manifest"})," and logs its reference \u2014 this is the permanent hash you use for ENS or stable URLs."]}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-js",children:'import { Bee, Topic, PrivateKey } from "@ethersphere/bee-js";\nconst bee = new Bee("http://localhost:1633");\nconst batchId =  "<BATCH_ID>" // Replace with your batch id\nconst privateKey = new PrivateKey("<PUBLISHER_KEY>"); // Replace with your publisher private key\nconst owner = privateKey.publicKey().address();\n\n// Upload and Create Feed Manifest\n\nconst topic = Topic.fromString("website");\nconst writer = bee.makeFeedWriter(topic, privateKey);\n\nconst upload = await bee.uploadFilesFromDirectory(batchId, "./website", {\n  indexDocument: "index.html",\n  errorDocument: "404.html"\n});\n\nconsole.log("Website Swarm Hash:", upload.reference.toHex())\n\nawait writer.uploadReference(batchId, upload.reference);\n\nconst manifestRef = await bee.createFeedManifest(batchId, topic, owner);\nconsole.log("Feed Manifest:", manifestRef.toHex());\n'})}),"\n",(0,a.jsx)(s.p,{children:'Upon the successful execution of the script, the hash of the uploaded website will be logged along feed manifest hash. Copy the "Feed Manifest" hash to be used in the next step:'}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"Website Swarm Hash: 6c45eae389b3bffce21443316d0bd47c4101545092b7c72c313a33ee7d003475\nFeed Manifest: caa414d70028d14b0bdd9cbab18d1c1a0a3bab1b20a56cf06937a6b20c7e7377\n"})}),"\n",(0,a.jsxs)(s.p,{children:["Follow the ",(0,a.jsx)(s.a,{href:"https://support.ens.domains/en/articles/12275979-how-to-add-a-decentralized-website-to-an-ens-name",children:"official ENS guide"})," for registering a content hash adding your content hash in the ENS UI (see ",(0,a.jsx)(s.a,{href:"#2-connecting-your-website-to-ens",children:"guide"}),"). However, rather than registering your website's hash directly, register the feed manifest hash we saved from the previous step from our example above."]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"bzz://<manifestRef>\n"})}),"\n",(0,a.jsx)(s.p,{children:"Future updates just re-run:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-js",children:"await writer.upload(batchId, newUpload.reference);\n"})}),"\n",(0,a.jsx)(s.p,{children:"Your ENS domain will always point to the latest upload via the feed manifest."}),"\n",(0,a.jsxs)(s.p,{children:["You\u2019ve now got a programmatic way to deploy and update your Swarm-hosted site with ENS support using ",(0,a.jsx)(s.code,{children:"bee-js"}),"!"]}),"\n",(0,a.jsx)(s.h2,{id:"connect-site-to-ens-domain",children:"Connect Site to ENS Domain"}),"\n",(0,a.jsx)(s.p,{children:"Once your site is uploaded to Swarm, you can make it accessible via an easy to remember ENS domain name rather than its Swarm hash:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"https://yourname.eth.limo/\nhttps://yourname.bzz.link/\n"})}),"\n",(0,a.jsx)(s.p,{children:"or through your own node:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"http://localhost:1633/bzz/yourname.eth/\n"})}),"\n",(0,a.jsx)(s.h4,{id:"using-the-official-ens-guide",children:"Using the Official ENS Guide"}),"\n",(0,a.jsxs)(s.p,{children:["ENS provides a clear walkthrough with screenshots showing how to add a content hash to your domain with their ",(0,a.jsx)(s.a,{href:"https://app.ens.domains/",children:"easy to use app"}),":"]}),"\n",(0,a.jsx)(s.p,{children:(0,a.jsx)(s.a,{href:"https://support.ens.domains/en/articles/12275979-how-to-add-a-decentralized-website-to-an-ens-name",children:"How to add a Decentralized website to an ENS name"})}),"\n",(0,a.jsx)(s.p,{children:"The guide covers:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Opening your ENS domain in the ENS Manager"}),"\n",(0,a.jsx)(s.li,{children:"Navigating to the Records tab"}),"\n",(0,a.jsx)(s.li,{children:"Adding a Content Hash"}),"\n",(0,a.jsx)(s.li,{children:"Confirming the transaction"}),"\n"]}),"\n",(0,a.jsx)(s.h4,{id:"swarm-specific-step",children:"Swarm-Specific Step"}),"\n",(0,a.jsx)(s.p,{children:"When you reach Step 2 in the ENS guide (\u201cAdd content hash record\u201d), enter your Swarm reference in the following format:"}),"\n",(0,a.jsx)(s.admonition,{type:"tip",children:(0,a.jsxs)(s.p,{children:["For the content hash, you can use a Swarm hosted website's hash directly, or as is recommended in the ",(0,a.jsx)(s.a,{href:"#recommended-use-feeds-for-seamless-updates---swarm-cli",children:(0,a.jsx)(s.code,{children:"swarm-cli"})})," and ",(0,a.jsx)(s.a,{href:"#recommended-use-feeds-for-seamless-updates---bee-js",children:(0,a.jsx)(s.code,{children:"bee-js"})})," guides above, publish your site to a feed and use the feed manifest hash instead. By using a feed manifest as the content hash, you can avoid repeated ENS registry updates."]})}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"bzz://<SWARM_HASH>\n"})}),"\n",(0,a.jsx)(s.p,{children:"Example:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{children:"bzz://cf50756e6115445fd283691673fa4ad2204849558a6f3b3f4e632440f1c3ab7c\n"})}),"\n",(0,a.jsx)(s.p,{children:"This works across:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"eth.limo and bzz.link"}),"\n",(0,a.jsx)(s.li,{children:"localhost (with a compatible RPC)"}),"\n",(0,a.jsx)(s.li,{children:"any ENS-compatible Swarm resolver"}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["You do not need to encode the hash or use any additional tools. ",(0,a.jsx)(s.code,{children:"bzz://<hash>"})," is sufficient."]})]})}function p(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>o});var t=n(96540);const a={},i=t.createContext(a);function r(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(i.Provider,{value:s},e.children)}},65537:(e,s,n)=>{n.d(s,{A:()=>v});var t=n(96540),a=n(34164),i=n(65627),r=n(56347),o=n(50372),l=n(30604),d=n(11861),c=n(78749);function h(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:s,children:n}=e;return(0,t.useMemo)((()=>{const e=s??function(e){return h(e).map((e=>{let{props:{value:s,label:n,attributes:t,default:a}}=e;return{value:s,label:n,attributes:t,default:a}}))}(n);return function(e){const s=(0,d.XI)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error(`Docusaurus error: Duplicate values "${s.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[s,n])}function p(e){let{value:s,tabValues:n}=e;return n.some((e=>e.value===s))}function m(e){let{queryString:s=!1,groupId:n}=e;const a=(0,r.W6)(),i=function(e){let{queryString:s=!1,groupId:n}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:s,groupId:n});return[(0,l.aZ)(i),(0,t.useCallback)((e=>{if(!i)return;const s=new URLSearchParams(a.location.search);s.set(i,e),a.replace({...a.location,search:s.toString()})}),[i,a])]}function f(e){const{defaultValue:s,queryString:n=!1,groupId:a}=e,i=u(e),[r,l]=(0,t.useState)((()=>function(e){let{defaultValue:s,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(s){if(!p({value:s,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${s}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return s}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:s,tabValues:i}))),[d,h]=m({queryString:n,groupId:a}),[f,b]=function(e){let{groupId:s}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(s),[a,i]=(0,c.Dv)(n);return[a,(0,t.useCallback)((e=>{n&&i.set(e)}),[n,i])]}({groupId:a}),x=(()=>{const e=d??f;return p({value:e,tabValues:i})?e:null})();(0,o.A)((()=>{x&&l(x)}),[x]);return{selectedValue:r,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),h(e),b(e)}),[h,b,i]),tabValues:i}}var b=n(9136);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(74848);function w(e){let{className:s,block:n,selectedValue:t,selectValue:r,tabValues:o}=e;const l=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),c=e=>{const s=e.currentTarget,n=l.indexOf(s),a=o[n].value;a!==t&&(d(s),r(a))},h=e=>{let s=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=l.indexOf(e.currentTarget)+1;s=l[n]??l[0];break}case"ArrowLeft":{const n=l.indexOf(e.currentTarget)-1;s=l[n]??l[l.length-1];break}}s?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},s),children:o.map((e=>{let{value:s,label:n,attributes:i}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:t===s?0:-1,"aria-selected":t===s,ref:e=>{l.push(e)},onKeyDown:h,onClick:c,...i,className:(0,a.A)("tabs__item",x.tabItem,i?.className,{"tabs__item--active":t===s}),children:n??s},s)}))})}function y(e){let{lazy:s,children:n,selectedValue:i}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(s){const e=r.find((e=>e.props.value===i));return e?(0,t.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:r.map(((e,s)=>(0,t.cloneElement)(e,{key:s,hidden:e.props.value!==i})))})}function g(e){const s=f(e);return(0,j.jsxs)("div",{className:(0,a.A)("tabs-container",x.tabList),children:[(0,j.jsx)(w,{...s,...e}),(0,j.jsx)(y,{...s,...e})]})}function v(e){const s=(0,b.A)();return(0,j.jsx)(g,{...e,children:h(e.children)},String(s))}},79329:(e,s,n)=>{n.d(s,{A:()=>r});n(96540);var t=n(34164);const a={tabItem:"tabItem_Ymn6"};var i=n(74848);function r(e){let{children:s,hidden:n,className:r}=e;return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.A)(a.tabItem,r),hidden:n,children:s})}}}]);