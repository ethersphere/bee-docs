"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[2187],{27638(e,t,n){n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"develop/tools-and-features/manifests","title":"Manifests","description":"Manifests define how files and folders are organized in Swarm. Instead of a flat list of uploaded files, Bee encodes directory structure as a compact prefix trie. This allows URLs like /images/logo.png, /docs/readme.txt, or / to resolve efficiently to the correct Swarm references. Whenever you upload a directory \u2014 via /bzz, bee-js, or swarm-cli \u2014 Bee automatically creates and uploads a manifest that enables a filesystem-like layer inside Swarm. The manifest reference itself is the root reference for your uploaded directory.","source":"@site/docs/develop/tools-and-features/manifests.md","sourceDirName":"develop/tools-and-features","slug":"/develop/tools-and-features/manifests","permalink":"/docs/develop/tools-and-features/manifests","draft":false,"unlisted":false,"editUrl":"https://github.com/ethersphere/docs.github.io/blob/master/docs/develop/tools-and-features/manifests.md","tags":[],"version":"current","frontMatter":{"title":"Manifests","id":"manifests"},"sidebar":"develop","previous":{"title":"Feeds","permalink":"/docs/develop/tools-and-features/feeds"},"next":{"title":"PSS Messaging","permalink":"/docs/develop/tools-and-features/pss"}}');var i=n(74848),r=n(28453);const a={title:"Manifests",id:"manifests"},o="Manifests",d={},l=[{value:"Why Manifests Matter",id:"why-manifests-matter",level:2},{value:"When Manifests Are Created",id:"when-manifests-are-created",level:2},{value:"Index and Error Document Options",id:"index-and-error-document-options",level:2},{value:"How Manifests Are Structured",id:"how-manifests-are-structured",level:2},{value:"Key Concepts",id:"key-concepts",level:3},{value:"Immutability",id:"immutability",level:2},{value:"Serving Files From a Manifest",id:"serving-files-from-a-manifest",level:2},{value:"When to Modify the Manifest",id:"when-to-modify-the-manifest",level:2},{value:"Websites",id:"websites",level:3},{value:"Directory Uploads",id:"directory-uploads",level:3},{value:"Putting It All Together",id:"putting-it-all-together",level:2}];function c(e){const t={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"manifests",children:"Manifests"})}),"\n",(0,i.jsxs)(t.p,{children:["Manifests define how files and folders are organized in Swarm. Instead of a flat list of uploaded files, Bee encodes directory structure as a compact prefix ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Trie",children:"trie"}),". This allows URLs like ",(0,i.jsx)(t.code,{children:"/images/logo.png"}),", ",(0,i.jsx)(t.code,{children:"/docs/readme.txt"}),", or ",(0,i.jsx)(t.code,{children:"/"})," to resolve efficiently to the correct Swarm references. Whenever you upload a directory \u2014 via ",(0,i.jsx)(t.code,{children:"/bzz"}),", ",(0,i.jsx)(t.code,{children:"bee-js"}),", or ",(0,i.jsx)(t.code,{children:"swarm-cli"})," \u2014 Bee automatically creates and uploads a manifest that enables a filesystem-like layer inside Swarm. The manifest reference itself is the root reference for your uploaded directory."]}),"\n",(0,i.jsx)(t.p,{children:"Manifests provide:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Filesystem-style path lookup (",(0,i.jsx)(t.code,{children:"/foo/bar.txt"}),")"]}),"\n",(0,i.jsx)(t.li,{children:"Hierarchical directory structure"}),"\n",(0,i.jsx)(t.li,{children:"Metadata attached to files or folders (e.g., Content-Type)"}),"\n",(0,i.jsx)(t.li,{children:"Optional custom routing behavior for websites (via manifest configuration)"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"They allow structured collections of files \u2014 including websites \u2014 to exist naturally on Swarm."}),"\n",(0,i.jsx)(t.h2,{id:"why-manifests-matter",children:"Why Manifests Matter"}),"\n",(0,i.jsx)(t.p,{children:"Raw content hashes identify data immutably, but they don\u2019t express relationships between files. A manifest adds this missing structure: it groups related files, assigns paths, stores metadata, and exposes the entire folder tree through URL-like navigation. Without manifests, every application on Swarm would need its own indexing and routing logic."}),"\n",(0,i.jsx)(t.h2,{id:"when-manifests-are-created",children:"When Manifests Are Created"}),"\n",(0,i.jsxs)(t.p,{children:["Manifests are created whenever you upload a directory via the ",(0,i.jsx)(t.code,{children:"/bzz"})," endpoint, which is used internally by ",(0,i.jsx)(t.code,{children:"swarm-cli"})," and ",(0,i.jsx)(t.code,{children:"bee-js"})," for directory uploads. Bee scans the folder, builds the trie, and produces a manifest reference representing the entire directory tree."]}),"\n",(0,i.jsx)(t.p,{children:"By contrast:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"/bytes"})," and ",(0,i.jsx)(t.code,{children:"/chunks"})," upload raw binary data only"]}),"\n",(0,i.jsx)(t.li,{children:"They do not create manifests"}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"index-and-error-document-options",children:"Index and Error Document Options"}),"\n",(0,i.jsxs)(t.p,{children:["Directory uploads in ",(0,i.jsx)(t.code,{children:"bee-js"})," support two optional helpers:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'{\n  indexDocument: "index.html",\n  errorDocument: "404.html"\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["These specify which file Bee should serve for the manifest root (",(0,i.jsx)(t.code,{children:"/"}),") and for invalid paths. These options can be used with normal directory uploads, not only websites \u2014 and any file type can be used \u2014 not only HTML."]}),"\n",(0,i.jsx)(t.h2,{id:"how-manifests-are-structured",children:"How Manifests Are Structured"}),"\n",(0,i.jsxs)(t.p,{children:["A manifest is structured as a trie: nodes are connected by forks, and each fork is labelled with a path segment. The path to a node is the concatenation of the segments you follow from the root. If a node\u2019s ",(0,i.jsx)(t.code,{children:"target"})," is non-zero, the path represented by that node refers to a file and the target points to its Swarm content. If the ",(0,i.jsx)(t.code,{children:"target"})," is zero, the node behaves like a directory or intermediate prefix."]}),"\n",(0,i.jsxs)(t.p,{children:["The printed output below shows a decoded Mantaray manifest (using the ",(0,i.jsxs)(t.a,{href:"https://github.com/ethersphere/examples/blob/main/utils/manifestToJson.js",children:[(0,i.jsx)(t.code,{children:"manifestToJson.js"})," script"]})," from the examples repo). It represents a simple folder tree containing a root file and a nested subfolder."]}),"\n",(0,i.jsx)(t.admonition,{title:'About the Term "Mantaray"',type:"info",children:(0,i.jsxs)(t.p,{children:['"Mantaray" was originally a standalone Swarm library for working with manifests. It has since been integrated into ',(0,i.jsx)(t.code,{children:"bee-js"})," and is no longer maintained as a standalone library. Its name is still used in ",(0,i.jsx)(t.code,{children:"bee-js"})," for the manifest-related classes (",(0,i.jsx)(t.code,{children:"MantarayNode"}),", etc.)."]})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n    "path": "/",\n    "target": "0x0000000000000000000000000000000000000000000000000000000000000000",\n    "metadata": null,\n    "forks": {\n        "folder/": {\n            "path": "folder/",\n            "target": "0x0000000000000000000000000000000000000000000000000000000000000000",\n            "metadata": null,\n            "forks": {\n                "nested.txt": {\n                    "path": "nested.txt",\n                    "target": "0x9442e445c0d58adea58e0a8afcdcc28ed7642d7a4ff9a253e8f1595faafbb808",\n                    "metadata": {\n                        "Content-Type": "text/plain; charset=utf-8",\n                        "Filename": "nested.txt"\n                    },\n                    "forks": {}\n                },\n                "subfolder/deep.txt": {\n                    "path": "subfolder/deep.txt",\n                    "target": "0x6aa935879ad2a547e57ea6350338bd04ad758977b542e86b31c159f31834b8fc",\n                    "metadata": {\n                        "Content-Type": "text/plain; charset=utf-8",\n                        "Filename": "deep.txt"\n                    },\n                    "forks": {}\n                }\n            }\n        },\n        "root.txt": {\n            "path": "root.txt",\n            "target": "0x98e63f7e826a01634881874246fc873cdf06bb5409ff5f9ec61d1e2de1dd3bf6",\n            "metadata": {\n                "Content-Type": "text/plain; charset=utf-8",\n                "Filename": "root.txt"\n            },\n            "forks": {}\n        }\n    }\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"key-concepts",children:"Key Concepts"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Node"})," \u2014 Represents either a directory or a file inside the manifest."]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Directories have a zero target and may contain child nodes."}),"\n",(0,i.jsx)(t.li,{children:"Files have a non-zero target pointing to their Swarm content."}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Fork"})," \u2014 A mapping from a path segment to a child node.",(0,i.jsx)(t.br,{}),"\n","In the JSON representation, the fork is the key (for example ",(0,i.jsx)(t.code,{children:'"folder/"'})," or ",(0,i.jsx)(t.code,{children:'"root.txt"'}),"), and the value is the child node for that segment."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Path"})," \u2014 The path segment label stored on a node (the same string used as the fork key from its parent). It may be a single segment such as ",(0,i.jsx)(t.code,{children:"folder/"})," or ",(0,i.jsx)(t.code,{children:"nested.txt"}),", or a remainder of the full path such as ",(0,i.jsx)(t.code,{children:"subfolder/deep.txt"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Target"})," \u2014 The Swarm reference for a file\u2019s content. Directories use a zero target."]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Metadata"})," \u2014 Attributes stored with a node (for example ",(0,i.jsx)(t.code,{children:"Content-Type"}),", filename, etc.)."]}),"\n",(0,i.jsx)(t.h2,{id:"immutability",children:"Immutability"}),"\n",(0,i.jsx)(t.p,{children:"Manifests are immutable. When you add, remove, or move a file, Bee writes new manifest nodes rather than modifying existing ones. Each update produces a new manifest reference, and older versions remain accessible."}),"\n",(0,i.jsx)(t.p,{children:"To provide a stable entry point even as the manifest changes, you can combine manifests with feeds. A feed acts as an updateable pointer: publish each new manifest reference to the feed, and users access the feed hash instead of individual manifest hashes."}),"\n",(0,i.jsxs)(t.p,{children:["You can find examples of this in the ",(0,i.jsx)(t.a,{href:"/docs/develop/introduction#building-on-swarm",children:"Building on Swarm"})," page."]}),"\n",(0,i.jsx)(t.h2,{id:"serving-files-from-a-manifest",children:"Serving Files From a Manifest"}),"\n",(0,i.jsx)(t.p,{children:"A manifest reference acts like the root of a filesystem. Requests such as:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"/ \u2192 index document\n/docs/readme.txt \u2192 file content\n"})}),"\n",(0,i.jsx)(t.p,{children:"are resolved by walking the trie until the correct file target is found. Bee handles this automatically under:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"/bzz/<manifest-hash>/<path>\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Paths to directories such as ",(0,i.jsx)(t.code,{children:"/docs/"})," or even ",(0,i.jsx)(t.code,{children:"/"})," will result in a 404 error by default unless the manifest is modified (or by specifying an ",(0,i.jsx)(t.code,{children:"indexDocument"})," for ",(0,i.jsx)(t.code,{children:"/"}),"):"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"/docs/ \u2192 404\n"})}),"\n",(0,i.jsxs)(t.p,{children:["You can specify which file or webpage you would like paths such as ",(0,i.jsx)(t.code,{children:"/docs/"})," (which do not get entries in the manifest by default) to resolve to by manipulating the manifest. See the ",(0,i.jsx)(t.a,{href:"/docs/develop/filesystem",children:'"Filesystem"'})," and ",(0,i.jsx)(t.a,{href:"/docs/develop/routing",children:"Routing"})," guides for more information and examples."]}),"\n",(0,i.jsxs)(t.admonition,{type:"caution",children:[(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"target"})," values inside a manifest should not be accessed directly. They cannot be reliably fetched via endpoints such as ",(0,i.jsx)(t.code,{children:"/bzz/"})," or tools like ",(0,i.jsx)(t.code,{children:"swarm-cli download"}),"."]}),(0,i.jsx)(t.p,{children:"To retrieve a file, always access it through the manifest, for example:"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"curl http://localhost:1633/bzz/<DIRECTORY_MANIFEST_HASH>/root.txt -o ./root.txt\n"})}),(0,i.jsx)(t.p,{children:"or"}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"swarm-cli download c8275d246e8a14ccd6f680ea0ecae543ebc0734e52676a5468a9a30db156be64/disc.jpg\n"})}),(0,i.jsx)(t.p,{children:"Bee resolves the underlying content automatically and returns the file correctly."})]}),"\n",(0,i.jsx)(t.h2,{id:"when-to-modify-the-manifest",children:"When to Modify the Manifest"}),"\n",(0,i.jsx)(t.p,{children:'Most Swarm users never need to manually inspect or modify a manifest. When you upload a directory, Bee creates one automatically and it "just works" for many common cases. You only need to modify the manifest when you want to change how paths resolve after the upload.'}),"\n",(0,i.jsx)(t.h3,{id:"websites",children:"Websites"}),"\n",(0,i.jsxs)(t.p,{children:["For simple single-page sites, no manual changes are required \u2014 setting ",(0,i.jsx)(t.code,{children:"indexDocument"})," and ",(0,i.jsx)(t.code,{children:"errorDocument"})," during upload is enough."]}),"\n",(0,i.jsx)(t.p,{children:"You need to modify the manifest when you want to change routing behavior, such as:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Removing ",(0,i.jsx)(t.code,{children:".html"})," extensions for clean URLs"]}),"\n",(0,i.jsx)(t.li,{children:"Adding, changing, or deleting routes"}),"\n",(0,i.jsx)(t.li,{children:"Redirecting paths or restructuring the site"}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["See the ",(0,i.jsx)(t.a,{href:"/docs/develop/routing",children:"Routing"})," guide for details."]}),"\n",(0,i.jsx)(t.h3,{id:"directory-uploads",children:"Directory Uploads"}),"\n",(0,i.jsx)(t.p,{children:"For one-time directory uploads that you don\u2019t plan to change, you typically don\u2019t need to touch the manifest. However, if you later want to add files, remove files, rename paths, or point new paths at existing content, the manifest must be updated."}),"\n",(0,i.jsxs)(t.p,{children:["See the ",(0,i.jsx)(t.a,{href:"/docs/develop/filesystem",children:'"Filesystem"'})," guide for examples."]}),"\n",(0,i.jsx)(t.h2,{id:"putting-it-all-together",children:"Putting It All Together"}),"\n",(0,i.jsx)(t.p,{children:"A manifest turns a set of immutable chunks into a structured, navigable collection of files. It enables folder trees, static assets, multi-file application bundles, websites, and data archives to exist on Swarm in a coherent, accessible way. Whether you're uploading a small directory or a full site, the manifest is what ties everything together."})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453(e,t,n){n.d(t,{R:()=>a,x:()=>o});var s=n(96540);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);