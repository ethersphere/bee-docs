"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[7121],{28453:(s,e,a)=>{a.d(e,{R:()=>r,x:()=>c});var t=a(96540);const n={},i=t.createContext(n);function r(s){const e=t.useContext(i);return t.useMemo((function(){return"function"==typeof s?s(e):{...e,...s}}),[e,s])}function c(s){let e;return e=s.disableParentContext?"function"==typeof s.components?s.components(n):s.components||n:r(s.components),t.createElement(i.Provider,{value:e},s.children)}},72805:(s,e,a)=>{a.r(e),a.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>r,metadata:()=>t,toc:()=>m});const t=JSON.parse('{"id":"concepts/incentives/redistribution-game","title":"Redistribution Game","description":"The redistribution game distributes xBZZ collected from postage stamp purchases, rewarding nodes for providing storage. Redistribution rewards incentivize nodes to continue providing storage to the network. The game is designed so that the most profitable strategy for participants is to store their assigned data honestly.","source":"@site/docs/concepts/incentives/redistribution-game.md","sourceDirName":"concepts/incentives","slug":"/concepts/incentives/redistribution-game","permalink":"/docs/concepts/incentives/redistribution-game","draft":false,"unlisted":false,"editUrl":"https://github.com/ethersphere/docs.github.io/blob/master/docs/concepts/incentives/redistribution-game.md","tags":[],"version":"current","frontMatter":{"title":"Redistribution Game","id":"redistribution-game"},"sidebar":"concepts","previous":{"title":"Incentives Overview","permalink":"/docs/concepts/incentives/overview"},"next":{"title":"Postage Stamps","permalink":"/docs/concepts/incentives/postage-stamps"}}');var n=a(74848),i=a(28453);const r={title:"Redistribution Game",id:"redistribution-game"},c=void 0,l={},m=[{value:"Redistribution Game Details",id:"redistribution-game-details",level:3},{value:"Penalties",id:"penalties",level:3}];function d(s){const e={a:"a",annotation:"annotation",code:"code",em:"em",h3:"h3",math:"math",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",mtext:"mtext",p:"p",semantics:"semantics",span:"span",strong:"strong",...(0,i.R)(),...s.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e.p,{children:["The redistribution game distributes xBZZ collected from ",(0,n.jsx)(e.a,{href:"/docs/concepts/incentives/postage-stamps",children:"postage stamp"})," purchases, rewarding nodes for providing storage. Redistribution rewards incentivize nodes to continue providing storage to the network. The game is designed so that the most profitable strategy for participants is to store their assigned data honestly."]}),"\n",(0,n.jsx)(e.h3,{id:"redistribution-game-details",children:"Redistribution Game Details"}),"\n",(0,n.jsxs)(e.p,{children:["Uploading data to Swarm requires purchasing postage stamp batches with xBZZ. The collected xBZZ is later redistributed as rewards to storage nodes. Every 152 Gnosis Chain blocks ",(0,n.jsx)(e.em,{children:(0,n.jsxs)(e.strong,{children:["a single ",(0,n.jsx)(e.a,{href:"/docs/concepts/DISC/neighborhoods",children:"neighborhood"})]})})," is selected to play the redistribution game. For each round of the game, one node from the selected neighborhood will have the chance to win a reward which is paid out from the accumulated xBZZ."]}),"\n",(0,n.jsxs)(e.p,{children:["The game has 3 phases, ",(0,n.jsx)(e.code,{children:"commit"}),", ",(0,n.jsx)(e.code,{children:"reveal"}),", and ",(0,n.jsx)(e.code,{children:"claim"}),". In the ",(0,n.jsx)(e.code,{children:"reveal"}),' phase of a previous game, an "anchor" address is randomly generated and used to determine the neighborhood for the current round.']}),"\n",(0,n.jsxs)(e.p,{children:["In the ",(0,n.jsx)(e.code,{children:"commit"}),' phase, nodes issue an on-chain transaction including an encrypted hash of the data they are storing (the unencrypted hash is known as the "reserve commitment") along with the ',(0,n.jsx)(e.a,{href:"/docs/references/glossary#2-area-of-responsibility-related-depths",children:"depth"})," for which they are reporting. This serves as an attestation of the data they are storing without revealing any other information."]}),"\n",(0,n.jsxs)(e.p,{children:["In the ",(0,n.jsx)(e.code,{children:"reveal"})," phase, each node reveals the decryption key for their encrypted hashes thereby publishing the hash. The winner is chosen at random among the honest nodes, but it is weighted in proportion to each node's stake density. Stake density is calculated as so:"]}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mtext,{children:"stake\xa0density"}),(0,n.jsx)(e.mo,{children:"="}),(0,n.jsx)(e.mtext,{children:"stake(xBZZ)"}),(0,n.jsx)(e.mo,{children:"\xd7"}),(0,n.jsxs)(e.msup,{children:[(0,n.jsx)(e.mn,{children:"2"}),(0,n.jsx)(e.mtext,{children:"storage\xa0depth"})]})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"\\text{stake density} = \\text{stake(xBZZ)} \\times {2}^\\text{storage depth}"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,n.jsx)(e.span,{className:"mord text",children:(0,n.jsx)(e.span,{className:"mord",children:"stake\xa0density"})}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"="}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(e.span,{className:"mord text",children:(0,n.jsx)(e.span,{className:"mord",children:"stake(xBZZ)"})}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.8991em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord",children:(0,n.jsx)(e.span,{className:"mord",children:"2"})}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsx)(e.span,{className:"vlist-t",children:(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.8991em"},children:(0,n.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord text mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:"storage\xa0depth"})})})]})})})})})]})]})]})]})}),"\n",(0,n.jsx)(e.h3,{id:"penalties",children:"Penalties"}),"\n",(0,n.jsxs)(e.p,{children:["During the ",(0,n.jsx)(e.code,{children:"reveal"})," phase if a nodes' revealed hash does not match the honest nodes' hash, that node will be temporarily frozen and will not be able to participate in a number of upcoming rounds. Currently the freeze period is defined in the ",(0,n.jsx)(e.a,{href:"https://github.com/ethersphere/storage-incentives/blob/master/src/Redistribution.sol#L536C1-L536C100",children:"redistribution smart contract"})," as:"]}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mn,{children:"152"}),(0,n.jsx)(e.mo,{children:"\xd7"}),(0,n.jsxs)(e.msup,{children:[(0,n.jsx)(e.mn,{children:"2"}),(0,n.jsx)(e.mtext,{children:"storage\xa0radius"})]}),(0,n.jsx)(e.mtext,{children:"\xa0blocks\xa0(at\xa05s\xa0per\xa0block)"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"152 \\times 2^\\text{storage radius} \\text{ blocks (at 5s per block)}"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(e.span,{className:"mord",children:"152"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1.1491em",verticalAlign:"-0.25em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord",children:"2"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsx)(e.span,{className:"vlist-t",children:(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.8991em"},children:(0,n.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord text mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:"storage\xa0radius"})})})]})})})})})]}),(0,n.jsx)(e.span,{className:"mord text",children:(0,n.jsx)(e.span,{className:"mord",children:"\xa0blocks\xa0(at\xa05s\xa0per\xa0block)"})})]})]})]})}),"\n",(0,n.jsx)(e.p,{children:"So for example at a storage radius of 10:"}),"\n",(0,n.jsx)(e.span,{className:"katex-display",children:(0,n.jsxs)(e.span,{className:"katex",children:[(0,n.jsx)(e.span,{className:"katex-mathml",children:(0,n.jsx)(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(e.semantics,{children:[(0,n.jsxs)(e.mrow,{children:[(0,n.jsx)(e.mn,{children:"152"}),(0,n.jsx)(e.mo,{children:"\xd7"}),(0,n.jsxs)(e.msup,{children:[(0,n.jsx)(e.mn,{children:"2"}),(0,n.jsx)(e.mn,{children:"10"})]}),(0,n.jsx)(e.mtext,{children:"\xa0blocks\xa0(at\xa05s\xa0per\xa0block)"}),(0,n.jsx)(e.mo,{children:"\u2248"}),(0,n.jsx)(e.mtext,{children:"\xa09\xa0days"})]}),(0,n.jsx)(e.annotation,{encoding:"application/x-tex",children:"152 \\times 2^{10} \\text{ blocks (at 5s per block)} \u2248 \\text{ 9 days}"})]})})}),(0,n.jsxs)(e.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.7278em",verticalAlign:"-0.0833em"}}),(0,n.jsx)(e.span,{className:"mord",children:"152"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(e.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"1.1141em",verticalAlign:"-0.25em"}}),(0,n.jsxs)(e.span,{className:"mord",children:[(0,n.jsx)(e.span,{className:"mord",children:"2"}),(0,n.jsx)(e.span,{className:"msupsub",children:(0,n.jsx)(e.span,{className:"vlist-t",children:(0,n.jsx)(e.span,{className:"vlist-r",children:(0,n.jsx)(e.span,{className:"vlist",style:{height:"0.8641em"},children:(0,n.jsxs)(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,n.jsx)(e.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(e.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:(0,n.jsx)(e.span,{className:"mord mtight",children:"10"})})})]})})})})})]}),(0,n.jsx)(e.span,{className:"mord text",children:(0,n.jsx)(e.span,{className:"mord",children:"\xa0blocks\xa0(at\xa05s\xa0per\xa0block)"})}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(e.span,{className:"mrel",children:"\u2248"}),(0,n.jsx)(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(e.span,{className:"base",children:[(0,n.jsx)(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,n.jsx)(e.span,{className:"mord text",children:(0,n.jsx)(e.span,{className:"mord",children:"\xa09\xa0days"})})]})]})]})})]})}function o(s={}){const{wrapper:e}={...(0,i.R)(),...s.components};return e?(0,n.jsx)(e,{...s,children:(0,n.jsx)(d,{...s})}):d(s)}}}]);