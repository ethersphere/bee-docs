"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[2974],{4890:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>c,toc:()=>h});var o=n(74848),s=n(28453);const i={title:"Bandwidth Incentives (SWAP)",id:"bandwidth-incentives"},a=void 0,c={id:"concepts/incentives/bandwidth-incentives",title:"Bandwidth Incentives (SWAP)",description:"The Swarm Accounting Protocol (SWAP) is a protocol used to manage the exchange of bandwidth resources between nodes. SWAP ensures that node operators collaborate in routing messages and data while protecting the network against frivolous use of bandwidth. The protocol combines off-chain peer-to-peer based accounting with on-chain settlement through the chequebook contract.",source:"@site/docs/concepts/incentives/bandwidth-incentives.md",sourceDirName:"concepts/incentives",slug:"/concepts/incentives/bandwidth-incentives",permalink:"/docs/concepts/incentives/bandwidth-incentives",draft:!1,unlisted:!1,editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/concepts/incentives/bandwidth-incentives.md",tags:[],version:"current",frontMatter:{title:"Bandwidth Incentives (SWAP)",id:"bandwidth-incentives"},sidebar:"concepts",previous:{title:"Postage Stamps",permalink:"/docs/concepts/incentives/postage-stamps"},next:{title:"Price Oracle",permalink:"/docs/concepts/incentives/price-oracle"}},r={},h=[{value:"Chequebook Contract",id:"chequebook-contract",level:2},{value:"Opportunistic Caching",id:"opportunistic-caching",level:2}];function d(e){const t={a:"a",h2:"h2",p:"p",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"The Swarm Accounting Protocol (SWAP) is a protocol used to manage the exchange of bandwidth resources between nodes. SWAP ensures that node operators collaborate in routing messages and data while protecting the network against frivolous use of bandwidth. The protocol combines off-chain peer-to-peer based accounting with on-chain settlement through the chequebook contract."}),"\n",(0,o.jsx)(t.p,{children:"As nodes relay requests and responses, they keep track of their bandwidth usage with each of their peers. Peers engage in a service-for-service exchange, where they provide resources to each other based on their relative usage."}),"\n",(0,o.jsx)(t.p,{children:'Once a node\'s relative debt with one of their peers crosses a certain threshold, the party in debt can either send a xBZZ payment in the form of a "cheque" (an off chain commitment to pay their debt), or can continue to provide bandwidth services in kind until their debt is paid off. Each node can set their own threshold for the level of relative debt they accept. Freeloader nodes which do not pay their debts are at risk of being blacklisted by other nodes.'}),"\n",(0,o.jsx)(t.h2,{id:"chequebook-contract",children:"Chequebook Contract"}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.a,{href:"https://github.com/ethersphere/swap-swear-and-swindle/blob/master/contracts/ERC20SimpleSwap.sol",children:"chequebook contract"})," is a smart contract used in the SWAP protocol to manage cheques that are sent between nodes on the network. It acts as a wallet which nodes can fund with xBZZ which can be used to issue payments when presented with a valid cheque. The contract is also responsible for ensuring that cheques are valid and are cashed out correctly."]}),"\n",(0,o.jsx)(t.p,{children:"When a node sends a cheque to one of its peers, it includes a signed message that specifies the amount of xBZZ tokens being transferred and the recipient's address. The chequebook contract receives this message and verifies that it is valid by checking the signature and ensuring that the sender has enough funds to cover the transfer."}),"\n",(0,o.jsx)(t.p,{children:"If the cheque is valid, the contract updates the balances of both nodes accordingly. The recipient can then cash out their xBZZ tokens by sending a transaction to the blockchain that invokes a function in the chequebook contract. This function transfers the specified amount of xBZZ tokens from the sender's account to the recipient's account."}),"\n",(0,o.jsx)(t.h2,{id:"opportunistic-caching",children:"Opportunistic Caching"}),"\n",(0,o.jsx)(t.p,{children:"When a node serves a chunk, the chunk is saved in the nodes' cache. Popular chunks which are frequently requested are kept in the cache so that they can be served again without the need to re-download the chunks from the network. This allows nodes to maximise their earnings by retaining popular chunks. This mechanism also contributes to Swarm's scalability, as popular chunks are always readily available for download as a result of opportunistic caching."}),"\n",(0,o.jsxs)(t.p,{children:["To learn in more detail about how bandwidth incentives work, refer to sections 3.1 and 3.2 from ",(0,o.jsx)(t.a,{href:"https://papers.ethswarm.org/p/book-of-swarm/",children:"The Book of Swarm"}),"."]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var o=n(96540);const s={},i=o.createContext(s);function a(e){const t=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(i.Provider,{value:t},e.children)}}}]);