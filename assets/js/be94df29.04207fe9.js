"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[9622],{28453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var t=s(96540);const i={},d=t.createContext(i);function l(e){const n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(d.Provider,{value:n},e.children)}},65621(e,n,s){s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"develop/dynamic-content","title":"Dynamic Content","description":"Under construction, set for major revisions.","source":"@site/docs/develop/dynamic-content.md","sourceDirName":"develop","slug":"/develop/dynamic-content","permalink":"/docs/develop/dynamic-content","draft":false,"unlisted":false,"editUrl":"https://github.com/ethersphere/docs.github.io/blob/master/docs/develop/dynamic-content.md","tags":[],"version":"current","frontMatter":{"title":"Dynamic Content","id":"dynamic-content","sidebar_label":"Dynamic Content"}}');var i=s(74848),d=s(28453);const l={title:"Dynamic Content",id:"dynamic-content",sidebar_label:"Dynamic Content"},a=void 0,r={},c=[{value:"Feeds for Dynamic Content",id:"feeds-for-dynamic-content",level:2},{value:"Why Use Per\u2011Asset Feeds",id:"why-use-perasset-feeds",level:2},{value:"Architecture Overview",id:"architecture-overview",level:2},{value:"Generate a Publisher Key",id:"generate-a-publisher-key",level:2},{value:"Create a Feed for an Asset",id:"create-a-feed-for-an-asset",level:2},{value:"Upload an Asset and Publish a Feed Update",id:"upload-an-asset-and-publish-a-feed-update",level:2},{value:"Updating an Existing Asset",id:"updating-an-existing-asset",level:2},{value:"Referencing Asset Feeds in Your SPA",id:"referencing-asset-feeds-in-your-spa",level:2},{value:"Example Deployment Workflow",id:"example-deployment-workflow",level:2},{value:"Summary",id:"summary",level:2}];function o(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsx)(n.p,{children:"Under construction, set for major revisions."})}),"\n",(0,i.jsx)(n.h2,{id:"feeds-for-dynamic-content",children:"Feeds for Dynamic Content"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"Although all data on Swarm is immutable, feeds provide an updatable reference that lets you simulate dynamic content. A feed is an append\u2011only sequence of updates that always resolves to its latest entry through a stable feed manifest."})}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"If you are not familiar with feeds, read:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Bee docs: /docs/develop/tools-and-features/feeds/"}),"\n",(0,i.jsxs)(n.li,{children:["Bee-JS docs: ",(0,i.jsx)(n.a,{href:"https://bee-js.ethswarm.org/docs/soc-and-feeds/",children:"https://bee-js.ethswarm.org/docs/soc-and-feeds/"})]}),"\n"]})]}),"\n",(0,i.jsx)(n.p,{children:"Single\u2011page applications (SPAs) deployed on Swarm work best when their static assets can be updated independently. Instead of reuploading the entire site when one file changes, you can create a separate feed manifest for each asset. Each asset feed provides a stable URL that always resolves to the latest version of that file."}),"\n",(0,i.jsx)(n.h2,{id:"why-use-perasset-feeds",children:"Why Use Per\u2011Asset Feeds"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Each React/Vite build artifact (HTML, JS, CSS, images) becomes individually updatable."}),"\n",(0,i.jsx)(n.li,{children:"Every asset has a dedicated feed manifest with its own stable Swarm URL."}),"\n",(0,i.jsx)(n.li,{children:"Updating a single file only updates its feed; the rest of the site stays untouched."}),"\n",(0,i.jsx)(n.li,{children:"This keeps deployments small, fast, and cost\u2011efficient."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"architecture-overview",children:"Architecture Overview"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Asset"}),(0,i.jsx)(n.th,{children:"Feed Topic"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Main site bundle"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"website"})}),(0,i.jsx)(n.td,{children:"HTML/JS/CSS entry point"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"CSS theme"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"main-css"})}),(0,i.jsx)(n.td,{children:"Global styling"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"JS bundle"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"main-js"})}),(0,i.jsx)(n.td,{children:"Application logic"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Images"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"img-*"})}),(0,i.jsx)(n.td,{children:"Media resources"})]})]})]}),"\n",(0,i.jsx)(n.p,{children:"Each asset has:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"a private key"}),"\n",(0,i.jsx)(n.li,{children:"a feed topic"}),"\n",(0,i.jsx)(n.li,{children:"a feed manifest"}),"\n",(0,i.jsxs)(n.li,{children:["a stable Swarm URL (",(0,i.jsx)(n.code,{children:"bzz://<MANIFEST_HASH>/"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"generate-a-publisher-key",children:"Generate a Publisher Key"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'import crypto from "crypto";\nimport { PrivateKey } from "@ethersphere/bee-js";\n\nconst hex = "0x" + crypto.randomBytes(32).toString("hex");\nconst pk = new PrivateKey(hex);\n\nconsole.log("Private key:", pk.toHex());\nconsole.log("Address:", pk.publicKey().address().toHex());\n'})}),"\n",(0,i.jsx)(n.h2,{id:"create-a-feed-for-an-asset",children:"Create a Feed for an Asset"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'import { Bee, PrivateKey, Topic } from "@ethersphere/bee-js";\n\nconst bee = new Bee("http://localhost:1633");\nconst batchId = "<BATCH_ID>";\n\nconst pk = new PrivateKey("<ASSET_PRIVATE_KEY>");\nconst topic = Topic.fromString("main-js");\nconst owner = pk.publicKey().address();\n\nconst writer = bee.makeFeedWriter(topic, pk);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"upload-an-asset-and-publish-a-feed-update",children:"Upload an Asset and Publish a Feed Update"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const upload = await bee.uploadFile(batchId, "./dist/assets/index-398a.js");\nawait writer.upload(batchId, upload.reference);\n\nconst manifest = await bee.createFeedManifest(batchId, topic, owner);\nconsole.log("JS Manifest:", manifest.toHex());\n'})}),"\n",(0,i.jsx)(n.p,{children:"Stable URL:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"bzz://<JS_MANIFEST_HASH>/\n"})}),"\n",(0,i.jsx)(n.p,{children:"This URL never changes, even when you replace the underlying file."}),"\n",(0,i.jsx)(n.h2,{id:"updating-an-existing-asset",children:"Updating an Existing Asset"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const nextUpload = await bee.uploadFile(batchId, "./dist/assets/index-new.js");\nawait writer.upload(batchId, nextUpload.reference);\n'})}),"\n",(0,i.jsx)(n.p,{children:"No new manifest is created. The old URL now resolves to the updated file."}),"\n",(0,i.jsx)(n.h2,{id:"referencing-asset-feeds-in-your-spa",children:"Referencing Asset Feeds in Your SPA"}),"\n",(0,i.jsx)(n.p,{children:"Rather than referencing a static build hash, point your SPA to feed manifests."}),"\n",(0,i.jsxs)(n.p,{children:["Example ",(0,i.jsx)(n.code,{children:"index.html"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-html",children:'<script type="module" src="bzz://<JS_MANIFEST_HASH>/"><\/script>\n<link rel="stylesheet" href="bzz://<CSS_MANIFEST_HASH>/" />\n'})}),"\n",(0,i.jsx)(n.p,{children:"Example React image reference:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jsx",children:'<img src={`bzz://${IMG_MANIFEST_HASH}/`} alt="Hero" />\n'})}),"\n",(0,i.jsx)(n.p,{children:"This makes your deployment resilient to Vite\u2019s changing file names, because Swarm fetches the latest version through the feed instead of the literal file path."}),"\n",(0,i.jsx)(n.h2,{id:"example-deployment-workflow",children:"Example Deployment Workflow"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Build Vite:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"npm run build\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["For each file in ",(0,i.jsx)(n.code,{children:"dist/"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"assign (or reuse) a feed topic"}),"\n",(0,i.jsx)(n.li,{children:"upload the file"}),"\n",(0,i.jsx)(n.li,{children:"update its feed"}),"\n",(0,i.jsx)(n.li,{children:"store the feed manifest hash in a hard\u2011coded list inside your SPA"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Rebuild your SPA to reference:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"bzz://<JS_FEED_MANIFEST>/"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"bzz://<CSS_FEED_MANIFEST>/"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"bzz://<IMAGE_FEED_MANIFEST>/"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Upload only the ",(0,i.jsx)(n.em,{children:"main"})," SPA entrypoint (often a small static HTML + JS shell) using ",(0,i.jsx)(n.code,{children:"swarm-cli feed upload"}),"."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This gives you a fully working dynamic SPA with lightweight incremental updates."}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Each build artifact gets its own updatable feed."}),"\n",(0,i.jsx)(n.li,{children:"Your SPA uses stable feed manifest URLs instead of build\u2011hashed filenames."}),"\n",(0,i.jsx)(n.li,{children:"Only changed files need to be uploaded."}),"\n",(0,i.jsx)(n.li,{children:"This keeps deployments fast while ensuring long\u2011lived URLs remain valid."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The next section (not included here) expands this into a registry\u2011based system for large dynamic sites."})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}}}]);