<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/technology/contracts/postage-stamp" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">Postage Stamp | Swarm Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.ethswarm.org/docs/learn/technology/contracts/postage-stamp"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Postage Stamp | Swarm Documentation"><meta data-rh="true" name="description" content="The postage stamp contract is one component in the suite of smart contract orchestrating Swarm&#x27;s storage incentives which make up the foundation of Swarm&#x27;s self-sustaining economic system."><meta data-rh="true" property="og:description" content="The postage stamp contract is one component in the suite of smart contract orchestrating Swarm&#x27;s storage incentives which make up the foundation of Swarm&#x27;s self-sustaining economic system."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.ethswarm.org/docs/learn/technology/contracts/postage-stamp"><link data-rh="true" rel="alternate" href="https://docs.ethswarm.org/docs/learn/technology/contracts/postage-stamp" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.ethswarm.org/docs/learn/technology/contracts/postage-stamp" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/matomo.js" async></script><link rel="stylesheet" href="/assets/css/styles.9fd7ffe2.css">
<script src="/assets/js/runtime~main.c3da0013.js" defer="defer"></script>
<script src="/assets/js/main.51863e70.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Swarm Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Swarm Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link inter">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/learn/introduction">Introduction</a></li><li><a class="dropdown__link" href="/docs/learn/technology/what-is-swarm">Technology</a></li><li><a class="dropdown__link" href="/docs/learn/ecosystem/swarm-foundation">Ecosystem</a></li><li><a class="dropdown__link" href="/docs/learn/tokens">Tokens</a></li><li><a class="dropdown__link" href="/docs/learn/glossary">Glossary</a></li><li><a class="dropdown__link" href="/docs/learn/faq">FAQ </a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Desktop</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/desktop/introduction">Introduction</a></li><li><a class="dropdown__link" href="/docs/desktop/install">Install</a></li><li><a class="dropdown__link" href="/docs/desktop/configuration">Configuration</a></li><li><a class="dropdown__link" href="/docs/desktop/access-content">Access Content</a></li><li><a class="dropdown__link" href="/docs/desktop/postage-stamps">Postage Stamps</a></li><li><a class="dropdown__link" href="/docs/desktop/upload-content">Upload Content</a></li><li><a class="dropdown__link" href="/docs/desktop/backup-restore">Backup and Restore</a></li><li><a class="dropdown__link" href="/docs/desktop/publish-a-website">Publish a Static Website</a></li><li><a class="dropdown__link" href="/docs/desktop/start-a-blog">Start a Blog</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Bee</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/bee/installation/quick-start">Installation</a></li><li><a class="dropdown__link" href="/docs/bee/working-with-bee/introduction">Working With Bee</a></li><li><a class="dropdown__link" href="/docs/bee/bee-faq">Bee FAQ</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Develop</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/develop/introduction">Introduction</a></li><li><a class="dropdown__link" href="/docs/develop/access-the-swarm/introduction">Access the Swarm</a></li><li><a class="dropdown__link" href="/docs/develop/tools-and-features/introduction">Tools and Features</a></li><li><a class="dropdown__link" href="/docs/develop/contribute/introduction">Contribute to Bee Development</a></li></ul></div><a class="navbar__item navbar__link" href="/api/">API Reference</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learn/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/learn/technology/what-is-swarm">Technology</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/what-is-swarm">What is Swarm?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/disc">DISC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/incentives">Incentives</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/pss">PSS</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/act">Access Control</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/learn/technology/contracts/overview">Contracts</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/contracts/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/contracts/chequebook">Chequebook</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/learn/technology/contracts/postage-stamp">Postage Stamp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/technology/contracts/price-oracle">Price Oracle</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/learn/ecosystem/swarm-foundation">Ecosystem</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/ecosystem/swarm-foundation">Foundation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/ecosystem/fair-data-society">Fair Data Society</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/ecosystem/community">Community</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/ecosystem/grants-bounties">Grants and Bounties</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/ecosystem/awesome">Awesome Swarm</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/docs/learn/advanced/erasure-cost-calculation">Advanced</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/advanced/erasure-cost-calculation">Erasure Cost Calculation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/learn/advanced/neighbourhoods">Neighbourhoods</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learn/tokens">Tokens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learn/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/learn/faq">FAQ</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Technology</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Contracts</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Postage Stamp</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Postage Stamp</h1></header><p>The <a href="https://github.com/ethersphere/storage-incentives/blob/master/src/PostageStamp.sol" target="_blank" rel="noopener noreferrer">postage stamp contract</a> is one component in the suite of smart contract orchestrating Swarm&#x27;s <a href="/docs/learn/technology/incentives">storage incentives</a> which make up the foundation of Swarm&#x27;s self-sustaining economic system.</p>
<p>When a node uploads data to Swarm, it &#x27;attaches&#x27; postage stamps to each <a href="/docs/learn/technology/disc">chunk</a> of data. Postage stamps are purchased in batches rather than one by one. The value assigned to a stamp indicates how much it is worth to persist the associated data on Swarm, which nodes use to prioritize which chunks to remove from their reserve first.</p>
<p>The value of a postage stamp decreases over time as if storage rent was regularly deducted from the batch balance. We say that a stamp expires when the batch it is issued from has insufficient balance. A chunk with an expired stamp can not be used in the proof of entitlement storer nodes need to submit in order to get compensated for their contributed storage space, therefore such expired chunks are evicted from nodes&#x27; reserves and put into the cache where their continued persistence depends on their popularity.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch-buckets">Batch Buckets<a href="#batch-buckets" class="hash-link" aria-label="Direct link to Batch Buckets" title="Direct link to Batch Buckets">​</a></h2>
<p>Postage stamps are issued in batches with a certain number of storage slots partitioned into <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>b</mi><mi>u</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{bucketDepth}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span> equally sized address space buckets. Each bucket is responsible for storing chunks that fall within a certain range of the address space. When uploaded, files are split into 4kb chunks, each chunk is assigned a unique address, and each chunk is then assigned to the bucket in which its address falls. Falling into the same range means a match on <code>n</code> leading bits of the chunk and bucket. This restriction is necessary to ensure (incentivise) uniform utilisation of the address space and is fair since the distribution of content addresses are uniform as well. Uniformity depth is the number of leading bits determining bucket membership (also called <code>bucket depth</code>). The uniformity depth is set to 16, so there are a total of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup><mo>=</mo><mn>65</mn><mo separator="true">,</mo><mn>536</mn></mrow><annotation encoding="application/x-tex">2^{16} = 65,536</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="mord">65</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">536</span></span></span></span> buckets.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="bucket-size">Bucket Size<a href="#bucket-size" class="hash-link" aria-label="Direct link to Bucket Size" title="Direct link to Bucket Size">​</a></h3>
<p>Each bucket has a certain number of slots which can be &quot;filled&quot; by chunks (In other words, for each bucket, a certain number of chunks can be stamped). Once all the slots of a bucket are filled, the entire postage batch will be fully utilised and can no longer be used to upload additional data.</p>
<p>Together with <code>batch depth</code>, <code>bucket depth</code>determines how many chunks are allowed in each bucket. The number of chunks allowed in each bucket is calculated like so:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi><mo>−</mo><mi>b</mi><mi>u</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(batchDepth - bucketDepth)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.938em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">ba</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></span>
<p>So with a batch depth of 24 and a bucket depth of 16:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>24</mn><mo>−</mo><mn>16</mn><mo stretchy="false">)</mo></mrow></msup><mo>=</mo><msup><mn>2</mn><mn>8</mn></msup><mo>=</mo><mn>256</mn><mtext> chunks/bucket</mtext></mrow><annotation encoding="application/x-tex">2^{(24 - 16)} = 2^{8} = 256 \text{ chunks/bucket}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.938em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.938em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">24</span><span class="mbin mtight">−</span><span class="mord mtight">16</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8641em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">256</span><span class="mord text"><span class="mord"> chunks/bucket</span></span></span></span></span></span>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Note that due how buckets fill as described above, a batch can become fully utilised before its theoretical maximum volume has been reached. See <a href="/docs/learn/technology/contracts/postage-stamp#batch-utilisation">batch utilisation section below</a> for more information.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch-depth-and-batch-amount">Batch Depth and Batch Amount<a href="#batch-depth-and-batch-amount" class="hash-link" aria-label="Direct link to Batch Depth and Batch Amount" title="Direct link to Batch Depth and Batch Amount">​</a></h2>
<p>Each batch of stamps has two key parameters, <code>batch depth</code> and <code>amount</code>, which are recorded on Gnosis Chain at issuance. Note that these &quot;depths&quot; do not refer to the depth terms used to describe topology which are outlined <a href="/docs/learn/glossary#depth-types">here in the glossary</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch-depth">Batch Depth<a href="#batch-depth" class="hash-link" aria-label="Direct link to Batch Depth" title="Direct link to Batch Depth">​</a></h3>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The minimum value for <code>depth</code> is 17, however higher depths are recommended for most use cases due to the <a href="#batch-utilisation">mechanics of stamp batch utilisation</a>. See <a href="#effective-utilisation-table">the depths utilisation table</a> to help decide which depth is best for your use case.</p></div></div>
<p><code>Batch depth</code> determines how much data can be stored by a batch. The number of chunks which can be stored (stamped) by a batch is equal to  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{batchDepth}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ba</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span>.</p>
<p>For a batch with a <code>batch depth</code> of 24, a maximum of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>24</mn></msup><mo>=</mo><mn>16</mn><mo separator="true">,</mo><mn>777</mn><mo separator="true">,</mo><mn>216</mn></mrow><annotation encoding="application/x-tex">2^{24} = 16,777,216</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8389em;vertical-align:-0.1944em"></span><span class="mord">16</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">777</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em"></span><span class="mord">216</span></span></span></span> chunks can be stamped.</p>
<p>Since we know that one chunk can store 4 kb of data, we can calculate the theoretical maximum amount of data which can be stored by a batch from the <code>batch depth</code>.</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>Theoretical maximum batch volume</mtext><mo>=</mo><msup><mn>2</mn><mrow><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi></mrow></msup><mo>×</mo><mtext>4 kb</mtext></mrow><annotation encoding="application/x-tex">\text{Theoretical maximum batch volume} = 2^{batchDepth} \times \text{4 kb}   </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord text"><span class="mord">Theoretical maximum batch volume</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.9824em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ba</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6944em"></span><span class="mord text"><span class="mord">4 kb</span></span></span></span></span></span>
<p>However, due to the way postage stamp batches are utilised, batches will become fully utilised before stamping the theoretical maximum number of chunks. Therefore when deciding which batch depth to use, it is important to consider the effective amount of data that can be stored by a batch, and not the theoretical maximum. The effective rate of utilisation increases along with the  batch depth. See <a href="/docs/learn/technology/contracts/postage-stamp#batch-utilisation">section on stamp batch utilisation below</a> for more information.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="batch-amount--batch-cost">Batch Amount (&amp; Batch Cost)<a href="#batch-amount--batch-cost" class="hash-link" aria-label="Direct link to Batch Amount (&amp; Batch Cost)" title="Direct link to Batch Amount (&amp; Batch Cost)">​</a></h3>
<p>The <code>amount</code> parameter is the quantity of xBZZ in PLUR <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>16</mn></msup><mi>P</mi><mi>L</mi><mi>U</mi><mi>R</mi><mo>=</mo><mn>1</mn><mtext> xBZZ</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(1 \times 10^{16}PLUR = 1 \text{ xBZZ})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.13889em">P</span><span class="mord mathnormal" style="margin-right:0.10903em">LU</span><span class="mord mathnormal" style="margin-right:0.00773em">R</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mord text"><span class="mord"> xBZZ</span></span><span class="mclose">)</span></span></span></span> that is assigned per chunk in the batch. The total number of xBZZ that will be paid for the batch is calculated from this figure and the <code>batch depth</code> like so:</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi></mrow></msup><mo>×</mo><mrow><mi>a</mi><mi>m</mi><mi>o</mi><mi>u</mi><mi>n</mi><mi>t</mi></mrow></mrow><annotation encoding="application/x-tex">2^{batchDepth} \times {amount}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9324em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ba</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6151em"></span><span class="mord"><span class="mord mathnormal">am</span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">n</span><span class="mord mathnormal">t</span></span></span></span></span></p>
<p>The paid xBZZ forms the <code>balance</code> of the batch. This <code>balance</code> is then slowly depleted as time ticks on and blocks are mined on Gnosis Chain.</p>
<p>For example, with a <code>batch depth</code> of 24 and an <code>amount</code> of 1000000000 PLUR:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mn>24</mn></msup><mo>×</mo><mn>1000000000</mn><mo>=</mo><mn>16777216000000000</mn><mtext> PLUR</mtext><mo>=</mo><mn>1.6777216</mn><mtext> xBZZ</mtext></mrow><annotation encoding="application/x-tex">2^{24} \times 1000000000 = 16777216000000000 \text{ PLUR} = 1.6777216 \text{ xBZZ}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9474em;vertical-align:-0.0833em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">1000000000</span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord">16777216000000000</span><span class="mord text"><span class="mord"> PLUR</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6833em"></span><span class="mord">1.6777216</span><span class="mord text"><span class="mord"> xBZZ</span></span></span></span></span></span>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculating-amount-needed-for-desired-ttl">Calculating <code>amount</code> needed for desired TTL<a href="#calculating-amount-needed-for-desired-ttl" class="hash-link" aria-label="Direct link to calculating-amount-needed-for-desired-ttl" title="Direct link to calculating-amount-needed-for-desired-ttl">​</a></h3>
<p>The desired <code>amount</code> can be easily estimated based on the current postage stamp price and the desired amount of storage time in seconds with the given Gnosis block time of 5 seconds and the stamp price. For the example below we assume a stamp price of 24000 PLUR / chunk / block:</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The postage stamp price is dynamically determined according to a network utilisation signal. You can view the current storage price at <a href="https://swarmscan.io/" target="_blank" rel="noopener noreferrer">Swarmscan.io</a>.</p></div></div>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mtext>stamp price</mtext><mo>÷</mo><mtext>block time in seconds</mtext><mo stretchy="false">)</mo><mo>×</mo><mtext>storage time in seconds</mtext></mrow><annotation encoding="application/x-tex">(\text{stamp price} \div \text{block time in seconds}) \times \text{storage time in seconds}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord text"><span class="mord">stamp price</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">block time in seconds</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">storage time in seconds</span></span></span></span></span></span>
<p>There are 1036800 seconds in 12 days, so the <code>amount</code> value required to store for 12 days can be calculated:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mtext>24000</mtext><mo>÷</mo><mtext>5</mtext><mo stretchy="false">)</mo><mo>×</mo><mtext>1036800</mtext><mo>=</mo><mn>4976640000</mn></mrow><annotation encoding="application/x-tex">(\text{24000} \div \text{5}) \times \text{1036800} = 4976640000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord text"><span class="mord">24000</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord text"><span class="mord">5</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord text"><span class="mord">1036800</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord">4976640000</span></span></span></span></span>
<p>So we can use 4976640000 as our <code>amount</code> value in order for our postage batch to store data for 12 days.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="batch-utilisation">Batch Utilisation<a href="#batch-utilisation" class="hash-link" aria-label="Direct link to Batch Utilisation" title="Direct link to Batch Utilisation">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="immutable-batches">Immutable Batches<a href="#immutable-batches" class="hash-link" aria-label="Direct link to Immutable Batches" title="Direct link to Immutable Batches">​</a></h3>
<p>Utilisation of an immutable batch is computed using a hash map of size <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mi>b</mi><mi>u</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{bucketDepth}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span></span></span></span></span></span></span></span></span></span></span></span> which is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup></mrow><annotation encoding="application/x-tex">2^{16}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span></span></span></span> for all batches, so 65536 total entries. For the keys of the key-value pairs of the hash map, the keys are 16 digit binary numbers from 0 to 65535, and the value is a counter.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/batches_01-e084efba3e803068f01309d12db9d7cb.png" width="2703" height="963" class="img_ev3q"></p>
<p>As chunks are uploaded to Swarm, each chunk is assigned to a bucket based the first 16 binary digits of the <a href="/docs/learn/technology/disc#chunks">chunk&#x27;s hash</a>. The chunk will be assigned to whichever bucket&#x27;s key matches the first 16 bits of its hash, and that bucket&#x27;s counter will be incremented by 1.</p>
<p>The batch is deemed &quot;full&quot; when ANY of these counters reach a certain max value. The max value is computed from the batch depth as such: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>b</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi><mo>−</mo><mi>b</mi><mi>u</mi><mi>c</mi><mi>k</mi><mi>e</mi><mi>t</mi><mi>D</mi><mi>e</mi><mi>p</mi><mi>t</mi><mi>h</mi><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(batchDepth-bucketDepth)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">ba</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight">h</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span><span class="mbin mtight">−</span><span class="mord mathnormal mtight">b</span><span class="mord mathnormal mtight">u</span><span class="mord mathnormal mtight">c</span><span class="mord mathnormal mtight" style="margin-right:0.03148em">k</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">t</span><span class="mord mathnormal mtight">De</span><span class="mord mathnormal mtight">pt</span><span class="mord mathnormal mtight">h</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>. For example with batch depth of 24, the max value is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>24</mn><mo>−</mo><mn>16</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(24-16)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">24</span><span class="mbin mtight">−</span><span class="mord mtight">16</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span> or 256. A bucket can be thought of as have a number of &quot;slots&quot; equal to this maximum value, and every time the bucket&#x27;s counter is incremented, one of its slots gets filled.</p>
<p>In the diagram below, the batch depth is 18, so there are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>18</mn><mo>−</mo><mn>16</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(18-16)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em"><span style="top:-3.063em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">18</span><span class="mbin mtight">−</span><span class="mord mtight">16</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span> or 4 slots for each bucket. The utilisation of a batch is simply the highest number of filled slots out of all 65536 entries or &quot;buckets&quot;. In this batch, none of the slots in any of the buckets have yet been filled with 4 chunks, so the batch is not yet fully utilised. The most filled slots out of all buckets is 2, so the stamp batch&#x27;s utilisation is 2 out of 4.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/batches_02-b0d64e9f456ec3ced0720d7e923ab93e.png" width="2703" height="903" class="img_ev3q"></p>
<p>As more chunks get uploaded and stamped, the bucket slots will begin to fill. As soon as the slots for any SINGLE bucket get filled, the entire batch is considered 100% utilised and can no longer be used to upload additional chunks.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/batches_03-d33365fe10a3274d74ddfdd0950bf610.png" width="2703" height="1023" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mutable-batches">Mutable Batches<a href="#mutable-batches" class="hash-link" aria-label="Direct link to Mutable Batches" title="Direct link to Mutable Batches">​</a></h3>
<p>Mutable batches use the same hash map structure as immutable batches, however its utilisation works very differently. In contrast with immutable batches, mutable batches are never considered fully utilised. Rather, at the point where an immutable batch would be considered fully utilised, a mutable batch can continue to stamp chunks. However, if any chunk&#x27;s address lands in a bucket whose slots are already filled, rather than the batch becoming fully utilised, that bucket&#x27;s counter gets reset, and the new chunk will replace the oldest chunk in that bucket.</p>
<p><img decoding="async" loading="lazy" src="/assets/images/batches_04-82c8f844e94e1f8c2bdd58ec7c127780.png" width="2703" height="1113" class="img_ev3q"></p>
<p>Therefore rather than speaking of the number of slots as determining the utilisation of a batch as with immutable batches, we can think of the slots as defining a limit to the amount of data which can be uploaded before old data starts to get overwritten.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="which-type-of-batch-to-use">Which Type of Batch to Use<a href="#which-type-of-batch-to-use" class="hash-link" aria-label="Direct link to Which Type of Batch to Use" title="Direct link to Which Type of Batch to Use">​</a></h3>
<p>Immutable batches are suitable for long term storage of data or for data which otherwise does not need to be changed and should never be overwritten, such as records archival, legal documents, family photos, etc.</p>
<p>Mutable batches are great for data which needs to be frequently updated and does not require a guarantee of immutability. For example, a blog, personal or company websites, ephemeral messaging app, etc.</p>
<p>The default batch type when unspecified is immutable. This can be modified through the Bee api by setting the <code>immutable</code> header with the <a href="https://docs.ethswarm.org/api/#tag/Transaction/paths/~1transactions~1%7BtxHash%7D/post" target="_blank" rel="noopener noreferrer"><code>\stamps POST</code> endpoint</a> to <code>false</code>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="re-uploading">Re-uploading<a href="#re-uploading" class="hash-link" aria-label="Direct link to Re-uploading" title="Direct link to Re-uploading">​</a></h3>
<p>There are several nuances to how the re-uploading of previously uploaded data to Swarm affect stamp batch utilisation. For single chunks, the behaviour is relatively straightforward, however with files that must get split into multiple chunks, the behaviour is less straightforward.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="single-chunks">Single chunks<a href="#single-chunks" class="hash-link" aria-label="Direct link to Single chunks" title="Direct link to Single chunks">​</a></h4>
<p>When a chunk which has previously been uploaded to Swarm is re-uploaded from the same node while the initial postage batch it was stamped by is still valid, no additional stamp will be utilised from the batch. However if the chunk comes from a different node than the original node, then a stamp WILL be utilised, and as long as at least one of the batches the chunk was stamped by is still valid, the chunk will be retained by storer nodes in its neighbourhood.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="files">Files<a href="#files" class="hash-link" aria-label="Direct link to Files" title="Direct link to Files">​</a></h4>
<p>When an identical file is re-uploaded then the stamp utilisation behaviour will be the same as with single chunks described in the section above. However, if part of the file has been modified and then re-uploaded, stamp utilisation behaviour will be different. This is due to how the chunking process works when a file is uploaded to Swarm. When uploaded to Swarm, files are split into 4kb sized chunks (2^12 bytes), and each chunk is assigned an address which is based on the content of the chunk. If even a single bit within the chunk is modified, then the address of the chunk will also be modified.</p>
<p>When a file which was previously uploaded with a single bit flipped is again split into chunks by a node before being uploaded to Swarm, then only the chunk with the flipped bit will have an updated address and require the utilisation of another stamp. The content of all the other chunks will remain the same, and therefore will not require new stamps to be utilised.</p>
<p>However, if rather than flipping a single bit we add some data to our file, this could cause changes in the content of every chunk of the file, meaning that every single chunk must be re-stamped. We can use a simplified example of why this is the case to more easily understand the stamp utilisation behaviour. Let us substitute a message containing letters of the alphabet rather than binary data.</p>
<p>Our initial message consists of 16 letters:</p>
<blockquote>
<p>abcdefghijklmnop</p>
</blockquote>
<p>When initially uploaded, it will be split into four chunks of four letters each:</p>
<blockquote>
<p>abcdefghijklmnop =&gt; abcd | efgh | ijkl | mnop</p>
</blockquote>
<p>Let us look at what happens when a single letter is changed (here we change a to z):</p>
<blockquote>
<p>abcdefghijklmnop =&gt; zbcd | efgh | ijkl | mnop</p>
</blockquote>
<p>In this case, only the first chunk is affected, all the other chunks retain the same content.</p>
<blockquote>
<p>Now let is examine the case where a new letter is added rather than simply modifying an already existing one. Here we add the number 1 at the start of the message:</p>
</blockquote>
<blockquote>
<p>1abcdefghijklmnop =&gt; 1abc | defg | hijk | lmno | p</p>
</blockquote>
<p>As you can see, by adding a single new letter at the start of the message, all the letters are shifted to the right by a single position, which a has caused EVERY chunk in the message to be modified rather than just a single chunk.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="affect-on-batch-utilisation">Affect on Batch Utilisation<a href="#affect-on-batch-utilisation" class="hash-link" aria-label="Direct link to Affect on Batch Utilisation" title="Direct link to Affect on Batch Utilisation">​</a></h4>
<p>The implications of this behaviour are that even a small change to the data of a file may cause every single chunk from the file to be changed, meaning that new stamps must be utilised for every chunk from that file. In practice, this could lead to high costs in data which is frequently changed, since for even a small change, every chunk from the file must be re-stamped.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="implications-for-swarm-users">Implications for Swarm Users<a href="#implications-for-swarm-users" class="hash-link" aria-label="Direct link to Implications for Swarm Users" title="Direct link to Implications for Swarm Users">​</a></h3>
<p>Due to the nature of batch utilisation described above, batches are often fully utilised before reaching their theoretical maximum storage amount. However as the batch depth increases, the chance of a postage batch becoming fully utilised early decreases. At batch depth 24, there is a 0.1% chance that a batch will be fully utilised/start replacing old chunks before reaching 64.33% of its theoretical maximum.</p>
<p>Let&#x27;s look at an example to make it clearer. Using the method of calculating the theoretical maximum storage amount <a href="/docs/learn/technology/contracts/postage-stamp#batch-depth">outlined above</a>, we can see that for a batch depth of 24, the theoretical maximum amount which can be stored is 68.72 gb:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mn>2</mn><mrow><mn>24</mn><mo>+</mo><mn>12</mn></mrow></msup><mo>=</mo><mtext>68,719,476,736 bytes</mtext><mo>=</mo><mtext>68.72 gb</mtext></mrow><annotation encoding="application/x-tex">2^{24+12} = \text{68,719,476,736 bytes} = \text{68.72 gb}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8641em"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em"><span style="top:-3.113em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span><span class="mbin mtight">+</span><span class="mord mtight">12</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">68,719,476,736 bytes</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">68.72 gb</span></span></span></span></span></span>
<p>Therefore we should use 64.33% the effective rate of usage for the stamp batch:</p>
<span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>68.72 gb</mtext><mo>×</mo><mn>0.6433</mn><mo>=</mo><mtext>44.21 gb </mtext></mrow><annotation encoding="application/x-tex">\text{68.72 gb} \times{0.6433} =  \text{44.21 gb }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">68.72 gb</span></span><span class="mspace" style="margin-right:0.2222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em"></span></span><span class="base"><span class="strut" style="height:0.6444em"></span><span class="mord"><span class="mord">0.6433</span></span><span class="mspace" style="margin-right:0.2778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em"></span><span class="mord text"><span class="mord">44.21 gb </span></span></span></span></span></span>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>The details of how the effective rates of utilisation are calculated will be published soon.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="effective-utilisation-table">Effective Utilisation Table<a href="#effective-utilisation-table" class="hash-link" aria-label="Direct link to Effective Utilisation Table" title="Direct link to Effective Utilisation Table">​</a></h3>
<p>When a user buys a batch of stamps they may make the naive assumption that they will be able to upload data equal to the sum total size of the maximum capacity of the batch. However, in practice this assumption is incorrect, so it is essential that Swarm users understand the relationship between batch depth and the theoretical and effective volumes of a batch.</p>
<p>The provided table shows the effective volume for each batch depth from 20 to 41 (note that currently the minimum stamp batch depth is 17, however 22 is the first depth with an effective volume above zero). The utilisation rate is the rate of utilisation of the theoretical max volume that a stamp batch can reach with a 0.1% failure rate (that is, there is only a one-in-a-thousand chance that the difference between the actual effectively utilised volume and effective volume shown in the table is greater than 0.1%). The &quot;effective volume&quot; figure shows the actual amount of data which can be stored at the effective rate. The effective volume figure is the one which should be used as the de-facto maximum amount of data that a batch can store before becoming either fully utilised (for immutable batches), or start overwriting older chunks (mutable batches).</p>
<table><thead><tr><th>Batch Depth</th><th>Utilisation Rate</th><th>Theoretical Max Volume</th><th>Effective Volume</th></tr></thead><tbody><tr><td>20</td><td>0.00%</td><td>4.29 GB</td><td>0.00 B</td></tr><tr><td>21</td><td>0.00%</td><td>8.59 GB</td><td>0.00 B</td></tr><tr><td>22</td><td>28.67%</td><td>17.18 GB</td><td>4.93 GB</td></tr><tr><td>23</td><td>49.56%</td><td>34.36 GB</td><td>17.03 GB</td></tr><tr><td>24</td><td>64.33%</td><td>68.72 GB</td><td>44.21 GB</td></tr><tr><td>25</td><td>74.78%</td><td>137.44 GB</td><td>102.78 GB</td></tr><tr><td>26</td><td>82.17%</td><td>274.88 GB</td><td>225.86 GB</td></tr><tr><td>27</td><td>87.39%</td><td>549.76 GB</td><td>480.43 GB</td></tr><tr><td>28</td><td>91.08%</td><td>1.10 TB</td><td>1.00 TB</td></tr><tr><td>29</td><td>93.69%</td><td>2.20 TB</td><td>2.06 TB</td></tr><tr><td>30</td><td>95.54%</td><td>4.40 TB</td><td>4.20 TB</td></tr><tr><td>31</td><td>96.85%</td><td>8.80 TB</td><td>8.52 TB</td></tr><tr><td>32</td><td>97.77%</td><td>17.59 TB</td><td>17.20 TB</td></tr><tr><td>33</td><td>98.42%</td><td>35.18 TB</td><td>34.63 TB</td></tr><tr><td>34</td><td>98.89%</td><td>70.37 TB</td><td>69.58 TB</td></tr><tr><td>35</td><td>99.21%</td><td>140.74 TB</td><td>139.63 TB</td></tr><tr><td>36</td><td>99.44%</td><td>281.47 TB</td><td>279.91 TB</td></tr><tr><td>37</td><td>99.61%</td><td>562.95 TB</td><td>560.73 TB</td></tr><tr><td>38</td><td>99.72%</td><td>1.13 PB</td><td>1.12 PB</td></tr><tr><td>39</td><td>99.80%</td><td>2.25 PB</td><td>2.25 PB</td></tr><tr><td>40</td><td>99.86%</td><td>4.50 PB</td><td>4.50 PB</td></tr><tr><td>41</td><td>99.90%</td><td>9.01 PB</td><td>9.00 PB</td></tr></tbody></table>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>This table is based on preliminary calculations and may be subject to change.</p></div></div>
<p>Nodes&#x27; storage is actually defined as a number of chunks with a size of 4kb (2^12 bytes) each, but in fact some <a href="/docs/learn/technology/disc#content-addressed-chunks-and-single-owner-chunks">SOC</a> chunks can be a few bytes longer, and some chunks can be smaller, so the conversion is not precise. Furthermore, due to the way Swarm represents files in a Merkle tree, the intermediate chunks are additional overhead which must also be accounted for.</p>
<p>Additionally, when a node stores chunks it uses additional indexes — therefore the disk space a maximally filled reserve would demand cannot be calculated with perfect accuracy.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ethersphere/docs.github.io/blob/master/docs/learn/technology/contracts/postage-stamp.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/learn/technology/contracts/chequebook"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Chequebook</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/learn/technology/contracts/price-oracle"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Price Oracle</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#batch-buckets" class="table-of-contents__link toc-highlight">Batch Buckets</a><ul><li><a href="#bucket-size" class="table-of-contents__link toc-highlight">Bucket Size</a></li></ul></li><li><a href="#batch-depth-and-batch-amount" class="table-of-contents__link toc-highlight">Batch Depth and Batch Amount</a><ul><li><a href="#batch-depth" class="table-of-contents__link toc-highlight">Batch Depth</a></li><li><a href="#batch-amount--batch-cost" class="table-of-contents__link toc-highlight">Batch Amount (&amp; Batch Cost)</a></li><li><a href="#calculating-amount-needed-for-desired-ttl" class="table-of-contents__link toc-highlight">Calculating <code>amount</code> needed for desired TTL</a></li></ul></li><li><a href="#batch-utilisation" class="table-of-contents__link toc-highlight">Batch Utilisation</a><ul><li><a href="#immutable-batches" class="table-of-contents__link toc-highlight">Immutable Batches</a></li><li><a href="#mutable-batches" class="table-of-contents__link toc-highlight">Mutable Batches</a></li><li><a href="#which-type-of-batch-to-use" class="table-of-contents__link toc-highlight">Which Type of Batch to Use</a></li><li><a href="#re-uploading" class="table-of-contents__link toc-highlight">Re-uploading</a></li><li><a href="#implications-for-swarm-users" class="table-of-contents__link toc-highlight">Implications for Swarm Users</a></li><li><a href="#effective-utilisation-table" class="table-of-contents__link toc-highlight">Effective Utilisation Table</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Swarm Foundation</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://ethswarm.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Homepage</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.gg/wdghaQsGq5" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://beehive.ethswarm.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Mattermost<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/ethswarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ethswarm" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://blog.ethswarm.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/ethersphere/bee" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyleft © 2024.</div></div></div></footer></div>
</body>
</html>